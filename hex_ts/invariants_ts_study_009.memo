タグ付きユニオンで状態や結果を型安全に分岐させ、`switch`文での型絞り込みや`never`型による網羅性チェックを徹底活用する手法を詳しく解説。