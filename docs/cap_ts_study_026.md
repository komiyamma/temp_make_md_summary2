# ç¬¬26ç« ï¼šCRDTå…¥é–€â‘¡ G-Counteré¢¨ã§â€œåæŸä½“é¨“â€ğŸ”¢ğŸŒ±

## çµè«–1è¡Œâœï¸âœ¨

**ã€Œå„ãƒãƒ¼ãƒ‰ãŒè‡ªåˆ†ã®ã‚«ã‚¦ãƒ³ãƒˆã ã‘å¢—ã‚„ã—ã¦ã€ãƒãƒ¼ã‚¸ã¯â€œãƒãƒ¼ãƒ‰ã”ã¨ã®æœ€å¤§å€¤ã‚’å–ã‚‹â€ã€ã«ã™ã‚‹ã¨ã€é †ç•ªãŒãã¡ã‚ƒãã¡ã‚ƒã§ã‚‚æœ€å¾Œã«åŒã˜ç­”ãˆã¸åæŸã™ã‚‹ã‚ˆğŸ˜ºğŸ§²**

---

## 1) ä»Šæ—¥ã®ã‚´ãƒ¼ãƒ«ğŸ¯ğŸ’–

ã“ã®ç« ã§ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã“ã¨ğŸ‘‡

* **G-Counterï¼ˆå¢—ãˆã‚‹ã ã‘ã‚«ã‚¦ãƒ³ã‚¿ï¼‰**ã®è€ƒãˆæ–¹ã‚’ã€æ‰‹ã‚’å‹•ã‹ã—ã¦ç†è§£ã™ã‚‹ğŸ”¢âœ¨
* **é…å»¶â³ãƒ»é€†é †ğŸ”€ãƒ»é‡è¤‡ğŸ“¨**ãŒã‚ã£ã¦ã‚‚ã€Œæœ€å¾Œã«ä¸€è‡´ã™ã‚‹ã€ä½“é¨“ã‚’ã™ã‚‹ğŸ§²ğŸŒˆ
* ã€Œãªã‚“ã§ `max` ã§ãƒãƒ¼ã‚¸ã™ã‚‹ã®ï¼Ÿã€ã‚’èª¬æ˜ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ğŸ§ ğŸ’¬ ([Ian Duncan][1])

é¡Œæã¯ã€ECã£ã½ã **ã€Œå•†å“ãƒšãƒ¼ã‚¸ã®é–²è¦§æ•°ğŸ‘€ã€ã‚„ã€Œã„ã„ã­æ•°ğŸ‘ã€** ã«ã—ã‚ˆã†ï¼ˆå¢—ãˆã‚‹ã ã‘ï¼G-Counterã¨ç›¸æ€§â—ï¼‰âœ¨

---

## 2) G-Counterã£ã¦ãªã«ï¼Ÿï¼ˆè¶…ã‚„ã•ã—ãï¼‰ğŸ§¸ğŸ”¢

G-Counterã¯ã“ã†ã„ã†ä½œæˆ¦ğŸ‘‡

* ãƒãƒ¼ãƒ‰A/B/Câ€¦ã¿ãŸã„ã«è¤‡æ•°ã®å ´æ‰€ãŒã‚ã‚‹ğŸŒ
* **ãã‚Œãã‚ŒãŒè‡ªåˆ†ã®ã‚«ã‚¦ãƒ³ãƒˆã ã‘å¢—ã‚„ã™**ï¼ˆä»–äººã®åˆ†ã¯å¢—ã‚„ã•ãªã„ï¼‰â•
* ã©ã“ã‹ã§çŠ¶æ…‹ã‚’äº¤æ›ã—ãŸã‚‰ã€**ãƒãƒ¼ãƒ‰ã”ã¨ã®å€¤ã¯ã€Œå¤§ãã„æ–¹ï¼ˆmaxï¼‰ã€ã‚’æ¡ç”¨ã™ã‚‹**âœ…
* å…¨ä½“ã®ç­”ãˆï¼ˆåˆè¨ˆï¼‰ã¯ã€**å…¨ãƒãƒ¼ãƒ‰ã®å€¤ã‚’è¶³ã™**ğŸ§®

ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆãƒãƒ¼ãƒ‰åˆ¥ã®â€œæ‹…å½“åˆ†â€ã‚’æŒã¤ï¼‰ğŸ‘‡

* AãŒ3å›å¢—ã‚„ã—ãŸ
* BãŒ5å›å¢—ã‚„ã—ãŸ
* CãŒ2å›å¢—ã‚„ã—ãŸ
  â¡ åˆè¨ˆã¯ 3+5+2 = 10

ãƒãƒ¼ã‚¸ã§ `max` ã‚’å–ã‚‹ç†ç”±ã¯è¶…é‡è¦ğŸ’¡
ã€Œã‚«ã‚¦ãƒ³ãƒˆã¯å¢—ãˆã‚‹ã ã‘ã€ã ã‹ã‚‰ã€**ã‚ˆã‚Šå¤§ãã„å€¤ï¼ã‚ˆã‚Šæ–°ã—ã„æƒ…å ±**ã£ã¦è¦‹ãªã›ã‚‹ã‚“ã ã‚ˆã­ğŸ‘‘
ãªã®ã§ **maxã‚’å–ã‚Œã°ã€å¢—ã‚„ã—ãŸåˆ†ã‚’å–ã‚Šã“ã¼ã•ãªã„**âœ¨ ([Ian Duncan][1])

---

## 3) ãƒãƒ³ã‚ºã‚ªãƒ³ï¼šTypeScriptã§â€œåæŸã™ã‚‹ã‚«ã‚¦ãƒ³ã‚¿â€ã‚’ä½œã‚‹ğŸ› ï¸ğŸ’

### 3-1) æœ€å°ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆã‚³ãƒãƒ³ãƒ‰ï¼‰ğŸ’»âœ¨

PowerShellã§OKğŸ‘Œï¼ˆãƒ•ã‚©ãƒ«ãƒ€ã¯ã©ã“ã§ã‚‚ï¼‰

```powershell
mkdir crdt-gcounter-lab
cd crdt-gcounter-lab
npm init -y
npm i -D typescript tsx @types/node
```

> tsxã¯ã€ŒTypeScriptã‚’ãã®ã¾ã¾å®Ÿè¡Œã§ãã‚‹ã€ç³»ã®ä¾¿åˆ©ãƒ„ãƒ¼ãƒ«ã ã‚ˆâš¡
> ãŸã ã— **tsxè‡ªä½“ã¯å‹ãƒã‚§ãƒƒã‚¯ã—ãªã„**ã®ã§ã€`tsc --noEmit` ã§å‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹æµã‚ŒãŒå®‰å…¨ğŸ™†â€â™€ï¸ ([nodejs.org][2])

### 3-2) tsconfig.json ã‚’ç”¨æ„ğŸ§©

TypeScript 5.9 ã§ã¯ `module/moduleResolution` ã« **å®‰å®šç‰ˆã® `node20`** ãŒè¿½åŠ ã•ã‚Œã¦ã‚‹ã‚ˆï¼ˆæµ®å‹•æŒ™å‹•ã‚’é¿ã‘ã‚„ã™ã„ï¼‰ğŸ§ âœ¨ ([TypeScript][3])

```json
{
  "compilerOptions": {
    "target": "ES2023",
    "module": "node20",
    "moduleResolution": "node20",
    "strict": true,
    "skipLibCheck": true,
    "noEmit": true
  }
}
```

### 3-3) package.json ã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¿½åŠ ğŸ§ªâœ¨

```json
{
  "name": "crdt-gcounter-lab",
  "private": true,
  "type": "module",
  "scripts": {
    "dev": "tsx src/demo.ts",
    "typecheck": "tsc --noEmit"
  },
  "devDependencies": {
    "@types/node": "^24.0.0",
    "tsx": "^4.0.0",
    "typescript": "^5.9.0"
  }
}
```

â€» ä¾å­˜ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä¾‹ã ã‚ˆï¼ˆæ‰‹å…ƒã§å…¥ã£ãŸã‚‚ã®ãŒåŸºæœ¬ã§OKï¼‰ğŸ˜Š
Node.jsã¯ **v24ãŒActive LTS**ï¼ˆå®‰å®šé‹ç”¨å‘ãï¼‰ã¨ã—ã¦æ¡ˆå†…ã•ã‚Œã¦ã‚‹ã‚ˆğŸ“Œ ([nodejs.org][4])

---

## 4) å®Ÿè£…ï¼šG-Counterï¼ˆã‚³ã‚¢ï¼‰ã‚’ä½œã‚‹ğŸ”©ğŸ”¢

### src/gcounter.ts

```ts
export type Snapshot = Record<string, number>;

/**
 * G-Counterï¼ˆGrow-only Counterï¼‰
 * - ãã‚Œãã‚Œã®ãƒãƒ¼ãƒ‰ï¼ˆreplicaï¼‰ãŒè‡ªåˆ†ã®ã‚«ã‚¦ãƒ³ãƒˆã ã‘å¢—ã‚„ã™
 * - merge ã¯ replica ã”ã¨ã« max ã‚’å–ã‚‹ï¼ˆå¢—ãˆã‚‹ã ã‘ãªã®ã§ max ãŒæ­£ã—ã„ï¼‰
 * - value ã¯å…¨ replica ã®åˆè¨ˆ
 */
export class GCounter {
  private readonly counts: Map<string, number>;

  constructor(public readonly replicaId: string, initial?: Snapshot) {
    this.counts = new Map(Object.entries(initial ?? {}));
    if (!this.counts.has(replicaId)) this.counts.set(replicaId, 0);
  }

  /** è‡ªåˆ†ã®ã‚«ã‚¦ãƒ³ãƒˆã‚’å¢—ã‚„ã™ï¼ˆæ¸›ã‚‰ã™ã®ã¯ç¦æ­¢ï¼‰ */
  increment(by = 1): void {
    if (!Number.isInteger(by) || by <= 0) {
      throw new Error("increment(by) ã¯ 1ä»¥ä¸Šã®æ•´æ•°ã ã‘OKã ã‚ˆğŸ§·");
    }
    const cur = this.counts.get(this.replicaId) ?? 0;
    this.counts.set(this.replicaId, cur + by);
  }

  /** ç¾åœ¨ã®åˆè¨ˆå€¤ï¼ˆå…¨replicaã®åˆè¨ˆï¼‰ */
  get value(): number {
    let sum = 0;
    for (const v of this.counts.values()) sum += v;
    return sum;
  }

  /** å¤–ã«æ¸¡ã™ç”¨ï¼šçŠ¶æ…‹ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆï¼ˆé€šä¿¡ã§é€ã‚‹ã‚‚ã®ï¼‰ */
  snapshot(): Snapshot {
    return Object.fromEntries(this.counts.entries());
  }

  /**
   * mergeï¼ˆçŠ¶æ…‹ã®çµ±åˆï¼‰
   * - replicaã”ã¨ã« max ã‚’å–ã‚‹
   * - ã“ã‚Œã«ã‚ˆã‚Šã€é †åºãŒé•ã£ã¦ã‚‚ãƒ»é‡è¤‡ã—ã¦ã‚‚ãƒ»ä½•å›æ··ãœã¦ã‚‚å£Šã‚Œãªã„
   */
  merge(other: Snapshot): void {
    for (const [replica, v] of Object.entries(other)) {
      const cur = this.counts.get(replica) ?? 0;
      this.counts.set(replica, Math.max(cur, v));
    }
    // å¿µã®ãŸã‚ã€è‡ªåˆ†ã®ã‚­ãƒ¼ãŒæ¶ˆãˆãªã„ã‚ˆã†ã«
    if (!this.counts.has(this.replicaId)) this.counts.set(this.replicaId, 0);
  }
}
```

ã“ã“ãŒâ€œåæŸã®ã‚«ã‚®â€ğŸ”‘

* merge ã¯ **è¶³ã•ãªã„**ï¼ˆè¶³ã™ã¨äºŒé‡è¨ˆä¸Šã«ãªã‚‹ğŸ˜±ï¼‰
* replicaã”ã¨ã« **max**ï¼ˆã€Œå¢—ãˆã‚‹ã ã‘ã€ã ã‹ã‚‰æˆç«‹ï¼‰ ([Ian Duncan][1])

---

## 5) å®Ÿé¨“ï¼šé…å»¶â³ãƒ»é€†é †ğŸ”€ãƒ»é‡è¤‡ğŸ“¨ã§ã‚‚åæŸã™ã‚‹ã®ã‚’è¦‹ã‚ˆã†ğŸ‘€âœ¨

### src/demo.ts

```ts
import { GCounter } from "./gcounter.js";

type Msg = { from: string; to: string; payload: Record<string, number> };

function send(queue: Msg[], from: string, to: string, payload: Record<string, number>) {
  queue.push({ from, to, payload });
}

function shuffle<T>(arr: T[]): T[] {
  // ã–ã£ãã‚Šã‚·ãƒ£ãƒƒãƒ•ãƒ«ï¼ˆé †åºãŒå£Šã‚Œã‚‹ä½“é¨“ç”¨ï¼‰
  return arr
    .map((x) => ({ x, r: Math.random() }))
    .sort((a, b) => a.r - b.r)
    .map((p) => p.x);
}

const A = new GCounter("A");
const B = new GCounter("B");
const C = new GCounter("C");

// ãã‚Œãã‚ŒãŒâ€œè‡ªåˆ†ã®åˆ†ã ã‘â€å¢—ã‚„ã™
A.increment(3); // Aæ‹…å½“ã§+3
B.increment(5); // Bæ‹…å½“ã§+5
C.increment(2); // Cæ‹…å½“ã§+2

console.log("åˆæœŸ:");
console.log("A", A.snapshot(), "value=", A.value);
console.log("B", B.snapshot(), "value=", B.value);
console.log("C", C.snapshot(), "value=", C.value);

let queue: Msg[] = [];

// é€ã‚‹ï¼ˆã§ã‚‚å±Šãé †ç•ªã¯ä¿è¨¼ã—ãªã„ï¼‰
send(queue, "A", "B", A.snapshot());
send(queue, "B", "C", B.snapshot());
send(queue, "C", "A", C.snapshot());

// é‡è¤‡é…é”ã£ã½ãã€åŒã˜ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚‚ã†1å›æŠ•ã’ã‚‹ğŸ“¨ğŸ“¨
send(queue, "A", "B", A.snapshot());

// é€†é †ãƒ»é…å»¶ã£ã½ãã€ã‚­ãƒ¥ãƒ¼ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«
queue = shuffle(queue);

console.log("\né…é€é–‹å§‹ï¼ˆé †åºãã¡ã‚ƒãã¡ã‚ƒï¼‰:");
for (const msg of queue) {
  const target = msg.to === "A" ? A : msg.to === "B" ? B : C;
  target.merge(msg.payload);

  console.log(`- ${msg.from} -> ${msg.to}`, msg.payload);
  console.log("  A.value", A.value, "B.value", B.value, "C.value", C.value);
}

console.log("\n1å›ç›®ã®é…é€å¾Œ:");
console.log("A", A.snapshot(), "value=", A.value);
console.log("B", B.snapshot(), "value=", B.value);
console.log("C", C.snapshot(), "value=", C.value);

// ã‚‚ã†1ãƒ©ã‚¦ãƒ³ãƒ‰ï¼ˆå…¨å“¡ãŒå…¨å“¡ã«é…ã‚‹ï¼‰ğŸ”
// ã“ã‚Œã§æœ€çµ‚çš„ã«å…¨å“¡ãŒåŒã˜ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã«è¿‘ã¥ã
queue = [];
send(queue, "A", "B", A.snapshot());
send(queue, "A", "C", A.snapshot());
send(queue, "B", "A", B.snapshot());
send(queue, "B", "C", B.snapshot());
send(queue, "C", "A", C.snapshot());
send(queue, "C", "B", C.snapshot());

queue = shuffle(queue);

console.log("\n2å›ç›®ã®é…é€:");
for (const msg of queue) {
  const target = msg.to === "A" ? A : msg.to === "B" ? B : C;
  target.merge(msg.payload);
}

console.log("\næœ€çµ‚:");
console.log("A", A.snapshot(), "value=", A.value);
console.log("B", B.snapshot(), "value=", B.value);
console.log("C", C.snapshot(), "value=", C.value);

// ç›®æ¨™ï¼šå…¨å“¡ã®åˆè¨ˆãŒä¸€è‡´ï¼ˆåæŸï¼ï¼‰ğŸ§²âœ¨
if (A.value !== B.value || B.value !== C.value) {
  throw new Error("ã¾ã åæŸã—ã¦ãªã„ã‚ˆğŸ˜µ ã‚‚ã†1ãƒ©ã‚¦ãƒ³ãƒ‰å›ã—ã¦ã¿ã¦ï¼");
}
console.log("\nåæŸOKğŸ§²âœ¨ åˆè¨ˆ=", A.value);
```

### å®Ÿè¡Œã—ã¦ã¿ã‚ˆã†ğŸƒâ€â™€ï¸ğŸ’¨

```powershell
npm run typecheck
npm run dev
```

è¦‹ã©ã“ã‚ğŸ‘€âœ¨

* é€”ä¸­ã¯A/B/Cã® `value` ãŒã‚ºãƒ¬ã‚‹ã“ã¨ãŒã‚ã‚‹ï¼ˆå½“ãŸã‚Šå‰ï¼‰ğŸ˜Œ
* ã§ã‚‚ **ä½•å›ã‹çŠ¶æ…‹äº¤æ›ã™ã‚‹ã¨ä¸€è‡´ã—ã¦ã„ã**ğŸ§²
* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒ **é‡è¤‡ã—ã¦ã‚‚å£Šã‚Œãªã„**ï¼ˆmergeãŒ `max` ãªã®ã§ï¼‰ğŸ§·âœ…

---

## 6) ã„ã£ãŸã‚“â€œå£Šã™â€ğŸ˜ˆğŸ”¨ï¼šãªãœã€Œå˜ä¸€ã®æ•°å­—ã‚’maxã€ã¯ãƒ€ãƒ¡ï¼Ÿ

ã‚‚ã—çŠ¶æ…‹ãŒã€ŒãŸã ã®æ•°å­—ã€1å€‹ã§ã€mergeãŒ `max` ã ã£ãŸã‚‰â€¦ğŸ‘‡

* A: 0 â†’ 1ï¼ˆAã§+1ï¼‰
* B: 0 â†’ 1ï¼ˆBã§+1ï¼‰
* merge(max) ã™ã‚‹ã¨ **1** ã«ã—ã‹ãªã‚‰ãªã„ï¼ˆæœ¬å½“ã¯2ã«ãªã£ã¦ã»ã—ã„ã®ã«ï¼ï¼‰ğŸ˜±

ã“ã‚ŒãŒã€Œãƒãƒ¼ãƒ‰åˆ¥ã«åˆ†ã‘ã‚‹ã€ç†ç”±ã ã‚ˆğŸ’¡
G-Counterã¯ **çŠ¶æ…‹ã‚’ â€œreplicaId â†’ ã‚«ã‚¦ãƒ³ãƒˆâ€ ã®Map** ã«ã™ã‚‹ã“ã¨ã§ã€ã“ã®è½ã¨ã—ç©´ã‚’é¿ã‘ã¦ã‚‹ğŸ—ºï¸âœ¨ ([simongui.github.io][5])

---

## 7) â€œåæŸã™ã‚‹è¨­è¨ˆâ€ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆâœ…ğŸ§²

G-Counterã‚’è¦‹ãªãŒã‚‰ã€CRDTã®å¤§äº‹ãƒã‚¤ãƒ³ãƒˆã‚’è¨€ãˆã‚‹ã‚ˆã†ã«ã—ã‚ˆã†ğŸ’–

* **å˜èª¿ã«å¢—ãˆã‚‹**ï¼ˆæ¸›ã‚‰ãªã„ï¼‰ğŸ“ˆ
* mergeãŒ **äº¤æ›æ³•å‰‡**ï¼ˆé †ç•ªã‚’å…¥ã‚Œæ›¿ãˆã¦ã‚‚åŒã˜ï¼‰ğŸ”€
* mergeãŒ **çµåˆå‰‡**ï¼ˆã¾ã¨ã‚æ–¹ã‚’å¤‰ãˆã¦ã‚‚åŒã˜ï¼‰ğŸ§©
* mergeãŒ **å†ªç­‰**ï¼ˆåŒã˜ã®ä½•å›æ··ãœã¦ã‚‚åŒã˜ï¼‰ğŸ§·

ã“ã®ã¸ã‚“ãŒæƒã†ã¨ã€é€†é †ãƒ»é…å»¶ãƒ»é‡è¤‡ã«å¼·ããªã‚‹ã‚ˆâœ¨ ([Bartosz Sypytkowski][6])

---

## 8) ã‚ˆãã‚ã‚‹ãƒãƒã‚Šãƒã‚¤ãƒ³ãƒˆé›†ğŸ˜µâ€ğŸ’«ğŸ§¯

* **replicaIdã‚’ä½¿ã„å›ã™**ï¼ˆåˆ¥ãƒãƒ¼ãƒ‰ãªã®ã«åŒã˜IDï¼‰â†’ åˆè¨ˆãŒå£Šã‚Œã‚‹âš ï¸
* mergeã§ **è¶³ã—ç®—ã—ã¡ã‚ƒã†** â†’ é‡è¤‡é…é”ã§äºŒé‡è¨ˆä¸ŠğŸ“¨ğŸ“¨ğŸ˜±
* incrementã«0ã‚„è² æ•°ã‚’å…¥ã‚Œã‚‹ â†’ G-Counterã˜ã‚ƒãªããªã‚‹ï¼ˆåˆ¥ç‰©ï¼‰ğŸ™…â€â™€ï¸
* ã€Œæ¸›ã‚‰ã—ãŸã„ã€æ¬²ãŒå‡ºã‚‹ â†’ ãã‚Œã¯ **PN-Counter**ï¼ˆæ¬¡ã®ç·´ç¿’ã§ã‚„ã‚ã†ï¼‰â•â–

---

## 9) ç·´ç¿’å•é¡Œï¼ˆæ‰‹ã‚’å‹•ã‹ã™ç”¨ï¼‰ğŸ“ğŸ’ª

1. **â€œé–²è¦§æ•°â€ã‚’ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆåˆ¥ã«ã—ãŸã„**ğŸ“¦

* `productId -> GCounter` ã‚’æŒã¤å½¢ã«ã—ã¦ã€å•†å“ã”ã¨ã«åæŸã•ã›ã¦ã¿ã‚ˆã†ğŸ§²âœ¨

2. **PN-Counterï¼ˆå¢—æ¸›ï¼‰ã‚’ä½œã‚‹**â•â–

* `Pï¼ˆå¢—ãˆã‚‹ï¼‰` ã¨ `Nï¼ˆå¢—ãˆã‚‹ï¼‰` ã®2ã¤ã®G-Counterã‚’æŒã£ã¦ã€`value = P - N` ã«ã™ã‚‹ğŸ§ ğŸ’¡ ([Medium][7])

3. **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é †ç•ªã‚’ã‚‚ã£ã¨åœ°ç„ã«ã™ã‚‹**ğŸ‘¹

* é€ä¿¡ã‚­ãƒ¥ãƒ¼ã«ã€Œãƒ©ãƒ³ãƒ€ãƒ ã§åŒã˜ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’3å›å…¥ã‚Œã‚‹ã€
* ãƒ©ãƒ³ãƒ€ãƒ ã§æ¬ è½ã‚‚å…¥ã‚Œã‚‹ï¼ˆå±Šã‹ãªã„ï¼‰
* ãã‚Œã§ã‚‚â€œä½•å›ã‹ãƒ©ã‚¦ãƒ³ãƒ‰ã™ã‚‹ã¨åæŸã™ã‚‹â€ã‚’è¦³å¯ŸğŸ‘€âœ¨

---

## 10) AIæ´»ç”¨ï¼ˆCopilot / Codexå‘ã‘ï¼‰ğŸ¤–ğŸ“

ã“ã®ç« ã¯AIãŒã‚ã¡ã‚ƒç›¸æ€§ã„ã„ã‚ˆğŸ’–ï¼ˆç”Ÿæˆâ†’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ä½¿ã†ã¨å¼·ã„ï¼‰ğŸ‘€âœ¨

* **ã‚³ãƒ¡ãƒ³ãƒˆå¼·åŒ–**ğŸ“
  ã€Œã“ã® `merge` ãŒãªãœ `max` ãªã®ã‹ã€åˆå¿ƒè€…å‘ã‘ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ã—ã¦ã€
* **ãƒ†ã‚¹ãƒˆç”Ÿæˆ**ğŸ§ª
  ã€Œé †ç•ªã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«ã—ã¦ã‚‚ã€æœ€çµ‚çš„ã« value ãŒä¸€è‡´ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ï¼ˆé‡è¤‡ã‚‚æ··ãœã¦ï¼‰ã€
* **ãƒã‚°æ³¨å…¥â†’ä¿®æ­£**ğŸ”¨
  ã€Œmergeã‚’ã‚ã–ã¨ `+` ã«å¤‰ãˆãŸç‰ˆã‚’ä½œã£ã¦ã€ã©ã‚“ãªå¤±æ•—ãŒèµ·ãã‚‹ã‹ãƒ­ã‚°ã§èª¬æ˜ã—ã¦ã€

---

## ã¾ã¨ã‚ğŸ§âœ¨

* G-Counterã¯ã€Œå¢—ãˆã‚‹ã ã‘ã€ã ã‹ã‚‰ã€**replicaåˆ¥ã®Mapã‚’æŒã£ã¦ã€mergeã¯max**ãŒåŠ¹ãğŸ”¢ğŸ§²
* é…å»¶â³ãƒ»é€†é †ğŸ”€ãƒ»é‡è¤‡ğŸ“¨ãŒã‚ã£ã¦ã‚‚ã€**æœ€çµ‚çš„ã«åŒã˜å€¤ã¸åæŸ**ã§ãã‚‹âœ…âœ¨
* â€œåæŸã™ã‚‹â€ã®æ°—æŒã¡ã‚ˆã•ã€ã“ã“ã§ä½“ã«å…¥ã‚Œã¦ãŠã“ã†ã€œï¼ğŸŒˆğŸ˜º

[1]: https://iankduncan.com/engineering/2025-11-27-crdt-dictionary/?utm_source=chatgpt.com "The CRDT Dictionary: A Field Guide to Conflict-Free ..."
[2]: https://nodejs.org/en/learn/typescript/run "Node.js â€” Running TypeScript with a runner"
[3]: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-5-9.html "TypeScript: Documentation - TypeScript 5.9"
[4]: https://nodejs.org/en/about/previous-releases?utm_source=chatgpt.com "Node.js Releases"
[5]: https://simongui.github.io/distributed-systems/crdt.html?utm_source=chatgpt.com "Convergent Replicated Data Types"
[6]: https://www.bartoszsypytkowski.com/the-state-of-a-state-based-crdts/?utm_source=chatgpt.com "An introduction to state-based CRDTs"
[7]: https://medium.com/%40m.hassan.def/crdts-in-action-data-consistency-without-consensus-930d30b059be?utm_source=chatgpt.com "CRDTs in Action: Data Consistency Without Consensus"
