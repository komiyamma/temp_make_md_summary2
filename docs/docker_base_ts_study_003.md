# 第03章：runで“とにかく動かす”体験（Helloコンテナ）🎉

この章は「Dockerを触ったことないけど、とりあえず動かしたい！」を最短で叶える回だよ〜😆✨
まずは **“動く体験”** を作って、そこから「何が起きたか」をちゃんと理解していこう💪😊

---

## この章のゴール🎯✨

できるようになったら勝ち🏆

* `docker run` でコンテナを起動できる🚀
* 「イメージ取得→コンテナ作成→実行→終了」の流れをざっくり説明できる🧠
* 使い捨て実行に `--rm` を付けられる🧹（片付け自動！）
* 必要なら `--pull` を切り替えて「最新版を必ず取る／取らない」を制御できる🎛️

---

## まず最短：Hello World を動かす🎉

ターミナル（PowerShell / VS Codeのターミナル / WSL）でこれだけ👇

```bash
docker run hello-world
```

### 何が起きてるの？👀

`docker run` はざっくりこういう動き👇

1. **イメージがPC内にあるか確認**
2. なければ **イメージを取得（pull）**
3. そのイメージから **コンテナを作成（create）**
4. **実行（start）** して、処理が終わったら **終了（exit）**

そして重要：`docker run` は **デフォルトで「イメージが無ければ pull する」** 挙動だよ✅
そのポリシーが `--pull` で変えられる（後でやる）✨ ([Docker Documentation][1])

---

## 「動いた痕跡」を見よう📋👣（超大事）

今の状態を確認👇

```bash
docker ps -a
```

* `hello-world` は一瞬で終わるので、だいたい `Exited` になってるはず😄
* 「コンテナは“プロセス”」なので、処理が終われば止まるんだね🧠✨

次に、イメージが増えてるのも確認👇

```bash
docker images
```

---

## 使い捨ての基本：`--rm`（片付け自動）🧹✨

短いコマンドを試す時、コンテナがどんどん溜まるのが“あるある”😇
そこで `--rm`！

```bash
docker run --rm hello-world
```

これで「終了したらコンテナを自動削除」してくれる🧼
さらに匿名ボリュームも消す挙動があるので、軽い検証と相性最高👍 ([Docker Documentation][1])

✅もう一度 `docker ps -a` を見て、「さっきのが残ってない」ことを確認しよう！

---

## もう一歩：コンテナの中に入る（`-it`）🕵️‍♂️🔦

「箱の中ってどうなってるの？」を体験しよう😆

```bash
docker run --rm -it alpine sh
```

入れたら、適当に見てみる👇

```sh
uname -a
cat /etc/os-release
ls
exit
```

### `-it` って何？🤔

* `-i`：入力を開きっぱなし（対話できる）
* `-t`：それっぽい画面（疑似TTY）を割り当てる

対話したい時は基本セットが `-it` だよ😊 ([docs.docker.jp][2])

---

## Pullの挙動をコントロール：`--pull`（最新版にしたい/したくない）🎛️📦

ここ、**2026運用でもめっちゃ大事**🔥
`docker run` の `--pull` は次の3つ👇（公式） ([Docker Documentation][1])

* `missing`（デフォルト）: 無い時だけ pull、あればキャッシュ利用
* `always` : 毎回 pull（「最新版を必ず」）
* `never` : pullしない（無いとエラー）

### 例）“常に最新版で実行したい”時✨

```bash
docker run --pull=always --rm hello-world
```

公式にも「`always` はイメージを最新にできるが、ローカルの古い/自作イメージを上書きしうる」って注意があるよ⚠️
なので「`latest`運用」「CIっぽい使い方」「毎回更新を取りたい」なら `always` が安心寄り😊 ([Docker Documentation][1])

---

## よく使う `run` オプション“最小セット”🧰✨

この章ではまず **これだけ覚える** でOK👍（他は後の章で鍛える💪）

| オプション           | 何するの？        | いつ使う？                                  |
| --------------- | ------------ | -------------------------------------- |
| `--rm`          | 終了後にコンテナ削除🧹 | ほぼ毎回の検証で便利 ([Docker Documentation][1]) |
| `-it`           | 対話モード🗣️     | 中に入って操作したい時 ([docs.docker.jp][2])      |
| `--pull=always` | 毎回pull📥     | 常に最新が欲しい時 ([Docker Documentation][1])  |
| `--name xxx`    | コンテナに名前🏷️   | 後で操作しやすくする（次章で活きる）                     |

---

## AI活用コーナー🤖✨（そのままコピペでOK）

### ① `run` オプション早見表を作らせる📝

「`docker run` でよく使うオプションを、初心者向けに表でまとめて。`--rm` / `-it` / `--pull` は必須で。例コマンドも付けて」

### ② 失敗した時の“次の一手”を出させる🔍

「このコマンドを実行したらこうなった。原因候補トップ3と、確認コマンドを順番に出して」
（コマンドとエラー全文を貼ると強い💪）

### ③ 自分の目的からコマンドを組み立てさせる🧩

「コンテナを“使い捨て（--rm）”で起動して、対話（-it）で入って、イメージは常にpullしたい。コマンド作って」

---

## つまずきポイントあるある😵‍💫➡️😄

* **pullが遅い/落ちる**：ネットワーク・プロキシ・企業環境だと起きがち💦（まずは別イメージでも同じか試す）
* **`-it` 付けたのに操作できない**：ターミナルが違う/入力が閉じてる時がある（`-i` が重要） ([docs.docker.jp][2])
* **WSLまわりが不安**：Docker DesktopはWSL2バックエンドでLinux作業環境を活かせる設計になってるよ🪟🐧 ([Docker Documentation][3])

---

## 理解チェック（3分）🧠✅

1. `docker run hello-world` のとき、イメージが無ければどうなる？
2. `--rm` は何を自動でやってくれる？（1行で） ([Docker Documentation][1])
3. `--pull` のデフォルト値は？それはどういう意味？ ([Docker Documentation][1])
4. `-it` の `i` と `t` はそれぞれ何？ ([docs.docker.jp][2])

---

## ミニ課題（5〜10分）🏋️‍♂️✨

次を全部こなせたら、もう「動かす」力はついた！🎉

1. `hello-world` を `--rm` 付きで動かす
2. `alpine` に `--rm -it` で入って `ls` → `exit`
3. `--pull=always` を付けて `hello-world` を動かす（挙動の違いを体感） ([Docker Documentation][1])

---

## 次章の予告チラ見せ👀✨

次は「止める・消す（stop / rm）」で、散らかったコンテナを片付けられる人になる🧹😆
`run` ができた今なら、気持ちよく進めるよ〜！🚀

[1]: https://docs.docker.com/reference/cli/docker/container/run/ "docker container run | Docker Docs"
[2]: https://docs.docker.jp/engine/reference/run.html "Docker run リファレンス — Docker-docs-ja 24.0 ドキュメント"
[3]: https://docs.docker.com/desktop/features/wsl/ "WSL | Docker Docs"
