# ç¬¬15ç« ï¼šãƒªãƒˆãƒ©ã‚¤åŸºæœ¬ï¼ˆã©ã“ã§ã€ä½•å›žã€ã„ã¤ï¼Ÿï¼‰ðŸ”ðŸ§ 

## ã“ã®ç« ã§ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã“ã¨ ðŸŽ¯âœ¨

* ã€Œ**ã©ã“ã§**ãƒªãƒˆãƒ©ã‚¤ã™ã‚‹ï¼Ÿã€ã‚’è¿·ã‚ãšæ±ºã‚ã‚‰ã‚Œã‚‹ ðŸ§­
* ã€Œ**ä½•å›ž**ã¾ã§ï¼Ÿã€ã€Œ**ã©ã‚“ãªå¤±æ•—**ã¯ã‚„ã‚ã‚‹ï¼Ÿã€ãŒèª¬æ˜Žã§ãã‚‹ ðŸ§ 
* Publisherï¼ˆé€ä¿¡ä¿‚ï¼‰ã« **å®‰å…¨ãªãƒªãƒˆãƒ©ã‚¤éª¨çµ„ã¿** ã‚’å…¥ã‚Œã‚‰ã‚Œã‚‹ ðŸ› ï¸

---

## 15-1. ãã‚‚ãã‚‚â€œãƒªãƒˆãƒ©ã‚¤â€ã£ã¦ã€ä½•ã‚’å®ˆã‚‹ãŸã‚ï¼ŸðŸ›¡ï¸

Outboxã®ä¸–ç•Œã§ã¯ã€PublisherãŒã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ã‚‹çž¬é–“ã« **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ»ç›¸æ‰‹ã‚µãƒ¼ãƒ“ã‚¹ãƒ»ä¸€æ™‚çš„ãªæ··é›‘** ãªã©ã§å¤±æ•—ã—ã¾ã™ ðŸŒ§ï¸ðŸ’¥
ã“ã®ã€Œä¸€æ™‚çš„ãªå¤±æ•—ã€ã‚’ **ãã®å ´ã§è«¦ã‚ãš**ã€ã‚‚ã†ä¸€åº¦è©¦ã™ã®ãŒãƒªãƒˆãƒ©ã‚¤ã§ã™ ðŸ”âœ¨

ãŸã ã—â€¦ï¼
ãƒªãƒˆãƒ©ã‚¤ã¯ä¸‡èƒ½ã˜ã‚ƒãªã„ã§ã™ ðŸ™…â€â™€ï¸
ã€Œã©ã†ã‚„ã£ã¦ã‚‚ç„¡ç†ãªå¤±æ•—ã€ã‚’ç²˜ã‚‹ã¨ã€ã‚€ã—ã‚éšœå®³ãŒåºƒãŒã‚Šã¾ã™ï¼ˆãƒªãƒˆãƒ©ã‚¤åµðŸŒªï¸ï¼‰
ã ã‹ã‚‰ **â€œãƒªãƒˆãƒ©ã‚¤ã—ã¦ã„ã„å¤±æ•—â€ã ã‘** ã‚’ç‹™ã„æ’ƒã¡ã—ã¾ã™ ðŸŽ¯

---

## 15-2. ãƒªãƒˆãƒ©ã‚¤ã¯â€œã©ã“ã§â€ã‚„ã‚‹ï¼Ÿâž¡ï¸ Outboxã§ã¯ã“ã“ãŒé‰„æ¿ðŸ“¦ðŸ“¤

Outboxãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã¯ã€åŸºæœ¬ã“ã†è€ƒãˆã‚‹ã®ãŒãƒ©ã‚¯ã§ã™ðŸ™‚

* âœ… **æ¥­å‹™å‡¦ç†ï¼ˆæ›¸ãè¾¼ã¿å´ï¼‰ã§ã¯ãƒªãƒˆãƒ©ã‚¤ã‚’æ¥µåŠ›ã—ãªã„**
  â†’ ã“ã“ã§ç²˜ã‚‹ã¨ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å¾…ã¡æ™‚é–“ã‚„DBãƒ­ãƒƒã‚¯ãŒå¢—ãˆã¦ãƒ„ãƒ©ã„ ðŸ˜µâ€ðŸ’«
* âœ… **Publisherï¼ˆé€ä¿¡ä¿‚ï¼‰ã§ãƒªãƒˆãƒ©ã‚¤ã™ã‚‹**
  â†’ é€ä¿¡ã®å¤±æ•—ã‚’æ¥­å‹™ã‹ã‚‰åˆ‡ã‚Šé›¢ã—ã¦ã€è½ã¡ç€ã„ã¦å†é€ã§ãã‚‹ ðŸ§˜â€â™€ï¸âœ¨

---

## 15-3. â€œå¤±æ•—â€ã‚’3ç¨®é¡žã«åˆ†ã‘ã‚‹ã¨è¶…ãƒ©ã‚¯ ðŸ§ ðŸ§©

ãƒªãƒˆãƒ©ã‚¤è¨­è¨ˆã®ã‚³ãƒ„ã¯ã€å¤±æ•—ã‚’ **åˆ†é¡ž** ã™ã‚‹ã“ã¨ï¼ðŸ—‚ï¸âœ¨
ã“ã®3ã¤ã«åˆ†ã‘ã‚‹ã¨ã€åˆ¤æ–­ãŒé€Ÿããªã‚Šã¾ã™ ðŸ’¨

### A) ä¸€æ™‚çš„ï¼ˆTransientï¼‰ðŸŒ§ï¸ â†’ ãƒªãƒˆãƒ©ã‚¤OKã«ãªã‚Šã‚„ã™ã„

* ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ‡ã‚Œãƒ»ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ â³
* ç›¸æ‰‹ãŒä¸€æ™‚çš„ã«è½ã¡ã¦ã‚‹ï¼ˆ5xxï¼‰ðŸ§¯
* æ··é›‘ï¼ˆ429 ãªã©ï¼‰ðŸš¦

### B) æ’ä¹…çš„ï¼ˆPermanentï¼‰ðŸ§± â†’ ãƒªãƒˆãƒ©ã‚¤ã—ãªã„ï¼ˆã—ã¦ã‚‚ç„¡é§„ï¼‰

* èªè¨¼ãƒ»æ¨©é™ãŒãƒ€ãƒ¡ï¼ˆä¾‹ï¼š401/403ç³»ï¼‰ðŸ”âŒ
* URL/è¨­å®šãƒŸã‚¹ã€å®›å…ˆãŒå­˜åœ¨ã—ãªã„ ðŸ§­ðŸ’¥
* payloadãŒå£Šã‚Œã¦ã‚‹ï¼ˆå¿…é ˆé …ç›®ãªã—ã€åž‹ãŒãŠã‹ã—ã„ï¼‰ðŸ“„ðŸ’”

### C) ä»•æ§˜ä¸Šï¼ˆForbidden / Not-allowedï¼‰ðŸš« â†’ â€œæ­£ã—ã„å¤±æ•—â€

* ã€Œä»Šãã®çŠ¶æ…‹ã§ã¯é€ã£ã¡ã‚ƒãƒ€ãƒ¡ã€ã¿ãŸã„ãªæ¥­å‹™ãƒ«ãƒ¼ãƒ«é•å
  ä¾‹ï¼šã‚­ãƒ£ãƒ³ã‚»ãƒ«æ¸ˆã¿æ³¨æ–‡ã®é€šçŸ¥ã‚’é€ã‚ã†ã¨ã—ãŸã€ãªã© ðŸ›’ðŸš«

ã“ã®ã€Œåˆ†é¡žã—ã¦ã‹ã‚‰ãƒªãƒˆãƒ©ã‚¤åˆ¤æ–­ã€ãŒåŸºæœ¬ã§ã™ ðŸ™‚âœ¨
ï¼ˆã‚¯ãƒ©ã‚¦ãƒ‰å„ç¤¾ã®æŽ¨å¥¨ã§ã‚‚ã€**ãƒªãƒˆãƒ©ã‚¤ã¯â€œå®‰å…¨ãªã‚‚ã®ã ã‘â€** ãŒå¤§å‰æã«ãªã£ã¦ã„ã¾ã™ã€‚ï¼‰([Google Cloud Documentation][1])

---

## 15-4. â€œä½•å›žã¾ã§ï¼Ÿâ€ã¯3ã¤ã®ä¸Šé™ã§æ±ºã‚ã‚‹ ðŸŽ›ï¸ðŸ§ 

å›žæ•°ã ã‘ã§æ±ºã‚ã‚‹ã¨äº‹æ•…ã‚Šã‚„ã™ã„ã®ã§ã€æ¬¡ã®3ç‚¹ã‚»ãƒƒãƒˆã§æ±ºã‚ã¾ã™ âœ…

1. **æœ€å¤§è©¦è¡Œå›žæ•°**ï¼šä¾‹ï¼‰3å›žã€5å›žã€10å›žâ€¦ðŸ”¢
2. **ç·ãƒªãƒˆãƒ©ã‚¤æ™‚é–“ï¼ˆã‚¿ã‚¤ãƒ ãƒã‚¸ã‚§ãƒƒãƒˆï¼‰**ï¼šä¾‹ï¼‰æœ€å¤§30ç§’ã¾ã§â±ï¸
3. **1å›žã‚ãŸã‚Šã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ**ï¼šä¾‹ï¼‰é€ä¿¡ã¯2ç§’ã§è«¦ã‚ã‚‹â³

ãƒã‚¤ãƒ³ãƒˆï¼š

* ãƒªãƒˆãƒ©ã‚¤ã¯å¾…ã¡æ™‚é–“ãŒä¼¸ã³ã‚‹ã®ã§ã€**ç„¡é™ã«ç²˜ã‚‰ãªã„**ï¼ˆä¸Šé™ã‚’ç½®ãï¼‰ðŸ§¯
* ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã¨ã‚»ãƒƒãƒˆã§è€ƒãˆã‚‹ï¼ˆã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆç„¡ã—ã¯åœ°ç„â€¦ðŸ˜‡ï¼‰
  ã“ã†ã„ã†è€ƒãˆæ–¹ã¯ã€åˆ†æ•£ã‚·ã‚¹ãƒ†ãƒ ã®å®šç•ªã¨ã—ã¦æ•´ç†ã•ã‚Œã¦ã„ã¾ã™ã€‚([Amazon Web Services, Inc.][2])

---

## 15-5. â€œã„ã¤ï¼Ÿâ€ã¯2æ®µéšŽã«åˆ†ã‘ã‚‹ã¨è¨­è¨ˆãŒã‚­ãƒ¬ã‚¤ ðŸªœâœ¨

Outboxã®Publisherã§ã¯ã€ãƒªãƒˆãƒ©ã‚¤ã‚’2ç¨®é¡žã«åˆ†ã‘ã‚‹ã®ãŒçŽ‹é“ã§ã™ðŸ™‚

### â‘  ãã®å ´ã§ã¡ã‚‡ã„ãƒªãƒˆãƒ©ã‚¤ï¼ˆå³æ™‚ãƒªãƒˆãƒ©ã‚¤ï¼‰âš¡ðŸ”

* ä¾‹ï¼‰åŒã˜å‡¦ç†ã®ä¸­ã§ã€Œæœ€å¤§3å›žã€ã ã‘è©¦ã™
* ç›®çš„ï¼šçž¬é–“çš„ãªæºã‚‰ãŽï¼ˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã·ã¤ã£ç­‰ï¼‰ã‚’æ‹¾ã† ðŸ“¶

### â‘¡ DBã«æ®‹ã—ã¦ã€å¾Œã§ã¾ãŸï¼ˆé…å»¶ãƒªãƒˆãƒ©ã‚¤ï¼‰ðŸ•’ðŸ”

* ä¾‹ï¼‰attemptCountã‚’å¢—ã‚„ã—ã¦ã€æ¬¡å›žã®Publisherèµ·å‹•ã§å†æŒ‘æˆ¦
* ç›®çš„ï¼šç›¸æ‰‹ãŒè½ã¡ã¦ã‚‹/æ··é›‘ã—ã¦ã‚‹ç­‰ã® â€œæ™‚é–“ãŒå¿…è¦ãªå¤±æ•—â€ ã‚’å¾…ã¤ â³

â€»â‘¡ã®ã€Œå¾…ã¡æ™‚é–“ã®ä½œã‚Šæ–¹ï¼ˆãƒãƒƒã‚¯ã‚ªãƒ•ã€ã‚¸ãƒƒã‚¿ãƒ¼ï¼‰ã€ã¯ **æ¬¡ã®ç¬¬16ç« **ã§ãŒã£ã¤ã‚Šã‚„ã‚Šã¾ã™ðŸ“ˆâœ¨
ï¼ˆæŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•ï¼‹ã‚¸ãƒƒã‚¿ãƒ¼ãŒå®šç•ªã¨ã—ã¦å¼·ãæŽ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚ï¼‰([Amazon Web Services, Inc.][3])

---

## 15-6. Outboxãƒ¬ã‚³ãƒ¼ãƒ‰ã«æœ€ä½Žé™ã‚‚ãŸã›ãŸã„â€œãƒªãƒˆãƒ©ã‚¤æƒ…å ±â€ðŸ§¾ðŸ“¦

PublisherãŒè³¢ããªã‚‹ãŸã‚ã«ã€Outboxãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆã¾ãŸã¯å¯¾å¿œã™ã‚‹ä¿å­˜å…ˆï¼‰ã«ã“ã®è¾ºãŒã‚ã‚‹ã¨è¶…ä¾¿åˆ©ã§ã™ðŸ™‚âœ¨

* `attemptCount`ï¼šä½•å›žæŒ‘æˆ¦ã—ãŸï¼ŸðŸ”¢
* `lastError`ï¼šæœ€å¾Œã®å¤±æ•—ç†ç”±ï¼ˆçŸ­ã‚ã§ã‚‚OKï¼‰ðŸ§¯
* `lastAttemptAt`ï¼šæœ€å¾Œã«è©¦ã—ãŸæ™‚åˆ»ðŸ•’
* `status`ï¼š`pending` / `processing` / `sent` / `failed` ãªã©ðŸš¦

---

## 15-7. å®Ÿè£…ï¼ˆTypeScriptï¼‰ï¼šâ€œåˆ†é¡žâ†’å›žæ•°åˆ¶é™â†’è¨˜éŒ²â€ã®éª¨çµ„ã¿ ðŸ› ï¸âœ¨

### 1) å¤±æ•—ã®åˆ†é¡žã‚’åž‹ã§è¡¨ã™ ðŸ§ ðŸ·ï¸

```ts
// å¤±æ•—åˆ†é¡žï¼ˆãƒªãƒˆãƒ©ã‚¤åˆ¤æ–­ã®ä¸­å¿ƒï¼ï¼‰
export type FailureKind = "transient" | "permanent" | "forbidden";

export class ClassifiedError extends Error {
  constructor(
    message: string,
    public readonly kind: FailureKind,
    public readonly cause?: unknown,
  ) {
    super(message);
    this.name = "ClassifiedError";
  }
}
```

### 2) â€œåˆ†é¡žé–¢æ•°â€ã‚’ä½œã‚‹ï¼ˆæœ€åˆã¯é›‘ã§ã‚‚OKï¼‰ðŸ”Žâœ¨

```ts
export function classifySendError(e: unknown): ClassifiedError {
  // ä¾‹ï¼šãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç³»ã£ã½ã„ â†’ transient
  if (e instanceof Error) {
    const msg = e.message.toLowerCase();

    if (msg.includes("timeout") || msg.includes("etimedout") || msg.includes("econnreset")) {
      return new ClassifiedError("Transient network failure", "transient", e);
    }

    if (msg.includes("unauthorized") || msg.includes("forbidden")) {
      return new ClassifiedError("Auth/permission error", "permanent", e);
    }
  }

  // ã‚ˆãåˆ†ã‹ã‚‰ãªã„ã‚‚ã®ã¯å®‰å…¨å´ã§ permanent å¯„ã‚Šã«å€’ã™ã®ã‚‚æ‰‹
  return new ClassifiedError("Unknown failure", "permanent", e);
}
```

### 3) ãƒªãƒˆãƒ©ã‚¤ãƒãƒªã‚·ãƒ¼ï¼ˆå›žæ•°ï¼‰ã‚’æ±ºã‚ã‚‹ ðŸŽ›ï¸

```ts
export type RetryPolicy = {
  maxAttempts: number; // ä¾‹: 3
};

export const defaultRetryPolicy: RetryPolicy = {
  maxAttempts: 3,
};
```

### 4) â€œé€ä¿¡å‡¦ç†â€ã‚’ãƒªãƒˆãƒ©ã‚¤ã§åŒ…ã‚€ ðŸ”ðŸ§©

```ts
export type SendFn = () => Promise<void>;

export async function runWithRetry(
  send: SendFn,
  policy: RetryPolicy,
  classify: (e: unknown) => ClassifiedError,
): Promise<{ ok: true } | { ok: false; error: ClassifiedError; attempts: number }> {
  for (let attempt = 1; attempt <= policy.maxAttempts; attempt++) {
    try {
      await send();
      return { ok: true };
    } catch (e) {
      const ce = classify(e);

      // forbidden / permanent ã¯å³çµ‚äº†ï¼ˆç²˜ã‚‰ãªã„ï¼‰
      if (ce.kind === "permanent" || ce.kind === "forbidden") {
        return { ok: false, error: ce, attempts: attempt };
      }

      // transient ã¯æ¬¡ã¸ï¼ˆâ€»å¾…ã¡æ™‚é–“ã¯ç¬¬16ç« ã§è¿½åŠ ã™ã‚‹ï¼‰
      if (attempt === policy.maxAttempts) {
        return { ok: false, error: ce, attempts: attempt };
      }
    }
  }

  // ã“ã“ã«ã¯åŸºæœ¬æ¥ãªã„ã‘ã©ä¿é™º
  return { ok: false, error: new ClassifiedError("Unexpected", "permanent"), attempts: policy.maxAttempts };
}
```

### 5) Outboxæ›´æ–°ï¼ˆattemptCount ã¨ lastError ã‚’æ®‹ã™ï¼‰ðŸ§¾ðŸ–Šï¸

Publisherå´ã®ãƒ•ãƒ­ãƒ¼ã¯ã–ã£ãã‚Šã“ã‚“ãªæ„Ÿã˜ðŸ‘‡

* `pending` ã‚’æ‹¾ã†
* `processing` ã«ã—ã¦ç¢ºä¿ï¼ˆç¬¬14ç« ã®ãƒ­ãƒƒã‚¯ã®è©±ï¼‰ðŸ”’
* `runWithRetry` ã§é€ä¿¡
* æˆåŠŸâ†’`sent`ã€å¤±æ•—â†’`failed` or `pending`ï¼ˆæ¬¡ç« ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°æ¬¡ç¬¬ï¼‰

---

## 15-8. â€œã“ã®ç« ã®åˆ¤æ–­ãƒ†ãƒ³ãƒ—ãƒ¬â€ðŸ“âœ¨ï¼ˆã‚³ãƒ”ãƒšã§è€ƒãˆã‚‰ã‚Œã‚‹ã‚„ã¤ï¼‰

æ¬¡ã®è³ªå•ã«ç­”ãˆã‚‹ã ã‘ã§ã€ãƒªãƒˆãƒ©ã‚¤æ–¹é‡ãŒå›ºã¾ã‚Šã¾ã™ðŸ™‚ðŸ§ 

* âœ… ãƒªãƒˆãƒ©ã‚¤ã—ã¦ã„ã„ã®ã¯ **Transientã ã‘**ï¼Ÿï¼ˆåŸºæœ¬YESï¼‰
* âœ… æœ€å¤§è©¦è¡Œå›žæ•°ã¯ï¼Ÿï¼ˆä¾‹ï¼š3å›žï¼‰ðŸ”¢
* âœ… 1å›žã‚ãŸã‚Šã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã¯ï¼Ÿï¼ˆä¾‹ï¼š2ç§’ï¼‰â³
* âœ… attemptCount / lastError / lastAttemptAt ã¯æ®‹ã™ï¼Ÿï¼ˆYESã ã¨é‹ç”¨ãƒ©ã‚¯ï¼‰ðŸ‘€
* âœ… å¤±æ•—ã—ãŸã‚‰ã©ã“ã¸ï¼Ÿï¼ˆæ¬¡ç« ï¼šnextRetryAtã€ã•ã‚‰ã«æ¬¡ï¼šDead Letterï¼‰ðŸ“®

---

## 15-9. AIã«æ‰‹ä¼ã£ã¦ã‚‚ã‚‰ã†ï¼ˆè¨­è¨ˆãŒé€Ÿããªã‚‹ã‚„ã¤ï¼‰ðŸ¤–ðŸ“âœ¨

### å¤±æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³æ´—ã„å‡ºã—ï¼ˆä¾‹ï¼‰

* ã€Œã“ã®é€ä¿¡å‡¦ç†ã§èµ·ã“ã‚Šã†ã‚‹å¤±æ•—ã‚’ *Transient / Permanent / Forbidden* ã«åˆ†ã‘ã¦ã€ä¾‹ã‚’10å€‹ãšã¤å‡ºã—ã¦ã€
* ã€ŒPermanentæ‰±ã„ã«ã™ã¹ãâ€œè¨­å®šãƒŸã‚¹ç³»â€ã‚’å…·ä½“åŒ–ã—ã¦ã€

### ãƒ†ã‚¹ãƒˆè¦³ç‚¹ã¥ãã‚Šï¼ˆä¾‹ï¼‰

* ã€Œãƒªãƒˆãƒ©ã‚¤ãŒ *3å›žã§æ­¢ã¾ã‚‹* ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã€
* ã€Œ2å›žå¤±æ•—â†’3å›žç›®æˆåŠŸã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã€
* ã€ŒPermanentãªã‚‰1å›žã§æ‰“ã¡åˆ‡ã‚‹ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã€

---

## 15-10. ç·´ç¿’å•é¡Œï¼ˆãƒŸãƒ‹ï¼‰ðŸ§ªðŸ€

æ¬¡ã®çŠ¶æ³ã§ã€A/B/C ã©ã‚Œã«åˆ†é¡žã™ã‚‹ï¼Ÿãã—ã¦ãƒªãƒˆãƒ©ã‚¤ã™ã‚‹ï¼ŸðŸ™‚

1. é€ä¿¡å…ˆãŒ 503 ã‚’è¿”ã—ãŸ ðŸ§¯
2. payloadã®å¿…é ˆé …ç›®ãŒæ¬ ã‘ã¦ãŸ ðŸ“„ðŸ’”
3. APIã‚­ãƒ¼ãŒç„¡åŠ¹ã ã£ãŸ ðŸ”‘âŒ
4. é€ä¿¡å…ˆãŒ 429 ã‚’è¿”ã—ãŸ ðŸš¦
5. ã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«æ¸ˆã¿æ³¨æ–‡ã®é€šçŸ¥ã€ã‚’é€ã‚ã†ã¨ã—ã¦ã„ãŸ ðŸ›’ðŸš«

---

## ã¾ã¨ã‚ ðŸŽ€

* ãƒªãƒˆãƒ©ã‚¤ã¯ **ã€Œåˆ†é¡žã€â†’ã€Œå›žæ•°/æ™‚é–“ã®ä¸Šé™ã€â†’ã€Œè¨˜éŒ²ã€** ãŒåŸºæœ¬ã‚»ãƒƒãƒˆ ðŸ”ðŸ§ 
* Outboxã§ã¯ **Publisherã§ãƒªãƒˆãƒ©ã‚¤** ã™ã‚‹ã®ãŒè¨­è¨ˆã—ã‚„ã™ã„ ðŸ“¦ðŸ“¤
* æ¬¡ã®ç¬¬16ç« ã§ã€å¾…ã¡æ™‚é–“ï¼ˆãƒãƒƒã‚¯ã‚ªãƒ•ï¼‹ã‚¸ãƒƒã‚¿ãƒ¼ï¼‰ã‚’è¶³ã—ã¦ **â€œè³¢ã„å†é€â€** ã«é€²åŒ–ã•ã›ã¾ã™ â³ðŸ“ˆâœ¨

[1]: https://docs.cloud.google.com/storage/docs/retry-strategy?utm_source=chatgpt.com "Retry strategy | Cloud Storage"
[2]: https://aws.amazon.com/builders-library/timeouts-retries-and-backoff-with-jitter/?utm_source=chatgpt.com "Timeouts, retries and backoff with jitter"
[3]: https://aws.amazon.com/blogs/architecture/exponential-backoff-and-jitter/?utm_source=chatgpt.com "Exponential Backoff And Jitter | AWS Architecture Blog"
