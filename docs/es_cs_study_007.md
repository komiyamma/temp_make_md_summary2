# ç¬¬7ç« ï¼šç”¨èªã‚»ãƒƒãƒˆï¼ˆCommand / Event / State / Projectionï¼‰ğŸ“®ğŸ“œğŸ§ ğŸ”

## ä»Šæ—¥ã®ã‚´ãƒ¼ãƒ«ğŸ¯âœ¨

ã“ã®ç« ã‚’èª­ã¿çµ‚ã‚ã£ãŸã‚‰ã€æ¬¡ã®4èªã‚’**æ··ãœãšã«**è©±ã›ã‚‹ï¼†æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ğŸ˜ŠğŸ’ª

* **Command**ï¼šã‚„ã£ã¦ï¼ã®ãŠé¡˜ã„ï¼ˆå‘½ä»¤ï¼‰ğŸ“®
* **Event**ï¼šã‚„ã£ãŸï¼ã®è¨˜éŒ²ï¼ˆå‡ºæ¥äº‹ï¼‰ğŸ“œ
* **State**ï¼šã„ã¾ã©ã†ãªã£ã¦ã‚‹ï¼Ÿã®çŠ¶æ…‹ğŸ§ 
* **Projection**ï¼šè¦‹ã‚„ã™ã„å½¢ã«æ•´ãˆãŸè¡¨ç¤ºç”¨ãƒ‡ãƒ¼ã‚¿ğŸ”

---

## ã¾ãšã¯â€œ1è¡Œãšã¤â€ã§è¦šãˆã‚ˆã†ğŸ“ŒğŸ˜Š

### Commandï¼ˆã‚³ãƒãƒ³ãƒ‰ï¼‰ğŸ“®

* **ã²ã¨ã“ã¨ã§**ï¼šã‚·ã‚¹ãƒ†ãƒ ã«ã€Œã“ã†ã—ã¦ï¼ã€ã¨é ¼ã‚€â€œãŠé¡˜ã„â€ğŸ™‹â€â™€ï¸
* **å½¢**ï¼šå‘½ä»¤å½¢ï¼ˆAdd / Remove / Change ãªã©ï¼‰
* **ãƒã‚¤ãƒ³ãƒˆ**ï¼šã¾ã æˆåŠŸã—ã¦ã‚‹ã‹åˆ†ã‹ã‚‰ãªã„ï¼ˆå¤±æ•—ã™ã‚‹ã‹ã‚‚ï¼‰ğŸ˜µâ€ğŸ’«

**ä¾‹ï¼ˆè²·ã„ç‰©ã‚«ãƒ¼ãƒˆï¼‰ğŸ›’**

* `AddItemToCart`ï¼ˆã‚«ãƒ¼ãƒˆã«å•†å“ã‚’è¿½åŠ ã—ã¦ï¼ï¼‰
* `RemoveItemFromCart`ï¼ˆå•†å“ã‚’å‰Šé™¤ã—ã¦ï¼ï¼‰

---

### Eventï¼ˆã‚¤ãƒ™ãƒ³ãƒˆï¼‰ğŸ“œ

* **ã²ã¨ã“ã¨ã§**ï¼šèµ·ããŸäº‹å®Ÿã‚’â€œéå»å½¢ã§â€è¨˜éŒ²ã—ãŸã‚‚ã®ğŸ“–
* **å½¢**ï¼šéå»å½¢ï¼ˆAdded / Removed / Changed ãªã©ï¼‰
* **ãƒã‚¤ãƒ³ãƒˆ**ï¼š**ã€Œèµ·ããŸã€ã“ã¨**ãªã®ã§ã€åŸºæœ¬ã¯å¾Œã‹ã‚‰æ›¸ãæ›ãˆãªã„âœ‹
* **ã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚°ã®ã‚³ã‚¢**ï¼šçŠ¶æ…‹ã®å¤‰åŒ–ã‚’ã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦æ®‹ã—ã€ã‚¤ãƒ™ãƒ³ãƒˆåˆ—ã‹ã‚‰çŠ¶æ…‹ã‚’å†ç¾ã§ãã‚‹è€ƒãˆæ–¹ğŸŒ±
  ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãŒâ€œçœŸå®Ÿã®å±¥æ­´â€ã«ãªã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼‰ ([martinfowler.com][1])

**ä¾‹ï¼ˆè²·ã„ç‰©ã‚«ãƒ¼ãƒˆï¼‰ğŸ›’**

* `ItemAddedToCart`ï¼ˆå•†å“ãŒè¿½åŠ ã•ã‚ŒãŸï¼‰
* `ItemRemovedFromCart`ï¼ˆå•†å“ãŒå‰Šé™¤ã•ã‚ŒãŸï¼‰

---

### Stateï¼ˆçŠ¶æ…‹ï¼‰ğŸ§ 

* **ã²ã¨ã“ã¨ã§**ï¼šã€Œä»Šã“ã®ç¬é–“ã®ã‚«ãƒ¼ãƒˆã¯ã“ã†ï¼ã€ã¨ã„ã†â€œçµæœâ€ğŸ“¸
* **å½¢**ï¼šåˆè¨ˆé‡‘é¡ã€å•†å“ä¸€è¦§ã€æ•°é‡ãªã©
* **ãƒã‚¤ãƒ³ãƒˆ**ï¼šã‚¤ãƒ™ãƒ³ãƒˆåˆ—ã‚’é †ã«é©ç”¨ï¼ˆApplyï¼‰ã—ã¦ä½œã‚Œã‚‹ğŸ”

**ä¾‹ï¼ˆè²·ã„ç‰©ã‚«ãƒ¼ãƒˆï¼‰ğŸ›’**

* Itemsï¼š[(ã‚Šã‚“ã”, 2), (ã¿ã‹ã‚“, 1)]
* Totalï¼š580å††

---

### Projectionï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ï¼‰ğŸ”

* **ã²ã¨ã“ã¨ã§**ï¼šç”»é¢ãƒ»æ¤œç´¢ãƒ»ä¸€è¦§ã®ãŸã‚ã«ã€**èª­ã¿ã‚„ã™ã„å½¢ã¸ä½œã‚Šç›´ã—ãŸ**ãƒ‡ãƒ¼ã‚¿ğŸ“‹âœ¨
* **ãƒã‚¤ãƒ³ãƒˆ**ï¼šæ›¸ãè¾¼ã¿ãƒ¢ãƒ‡ãƒ«ï¼ˆå³å¯†ï¼‰ã¨ã€èª­ã¿ãƒ¢ãƒ‡ãƒ«ï¼ˆè¦‹ã‚„ã™ã„ï¼‰ã‚’åˆ†ã‘ã‚‹ç™ºæƒ³ã¨ç›¸æ€§ãŒè‰¯ã„ã‚ˆğŸ˜Š
  ï¼ˆèª­ã¿ã¨æ›¸ãã‚’åˆ†ã‘ã¦æœ€é©åŒ–ã™ã‚‹è€ƒãˆæ–¹ã¯CQRSã§ã‚‚ã‚ˆãèªã‚‰ã‚Œã‚‹ã‚ˆï¼‰ ([Microsoft Learn][2])
* **å®Ÿè£…ã‚¤ãƒ¡ãƒ¼ã‚¸**ï¼šã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ã‘å–ã£ã¦â€œè¡¨ç¤ºç”¨ã®è¡¨â€ã‚’æ›´æ–°ã™ã‚‹ğŸ’¡
  ï¼ˆEventStoreDBç³»ã®ä¸–ç•Œã ã¨â€œProjectionsâ€ã¨ã„ã†åå‰ã§ä»•çµ„ã¿ãŒç”¨æ„ã•ã‚Œã¦ã„ãŸã‚Šã™ã‚‹ï¼‰ ([Kurrent Docs][3])

**ä¾‹ï¼ˆè²·ã„ç‰©ã‚«ãƒ¼ãƒˆï¼‰ğŸ›’**

* ç”»é¢ç”¨ï¼š`CartSummary`ï¼ˆå•†å“æ•°ã€åˆè¨ˆã€æœ€å¾Œã«æ›´æ–°ã—ãŸæ™‚é–“â€¦ãªã©ï¼‰
* ä¸€è¦§ç”¨ï¼š`CartListRow`ï¼ˆã‚«ãƒ¼ãƒˆIDã€åˆè¨ˆã€ã‚¢ã‚¤ãƒ†ãƒ æ•°ï¼‰

---

## 4èªã®é–¢ä¿‚ã‚’â€œ1æšâ€ã§ç†è§£ğŸ§ ğŸ–¼ï¸

```text
ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰        ï¼ˆã‚·ã‚¹ãƒ†ãƒ ï¼‰
   â”‚                  â”‚
   â”‚  Command ğŸ“®       â”‚  ã€Œã‚„ã£ã¦ï¼ã€
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  Decideï¼ˆåˆ¤æ–­ï¼‰ğŸ§ 
   â”‚                  â”‚  ä¸å¤‰æ¡ä»¶ãƒã‚§ãƒƒã‚¯âœ…
   â”‚                  â”‚
   â”‚                  â”‚  Event ğŸ“œ  ã€Œã‚„ã£ãŸï¼ã€
   â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Event Storeï¼ˆå±¥æ­´ï¼‰ğŸ“š
   â”‚                  â”‚
   â”‚                  â”‚  State ğŸ§ ï¼ˆã„ã¾ã®çŠ¶æ…‹ï¼‰
   â”‚                  â””â”€â”€ Apply ğŸ”ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆã‚’é©ç”¨ï¼‰
   â”‚
   â”‚  Projection ğŸ”ï¼ˆè¡¨ç¤ºç”¨ï¼‰
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  ç”»é¢/æ¤œç´¢/ä¸€è¦§ã«ä½¿ã†ğŸ“‹âœ¨
```

è¦šãˆæ–¹ã®åˆè¨€è‘‰ğŸ’¬âœ¨

* **Command = ãŠé¡˜ã„**ğŸ“®
* **Event = äº‹å®Ÿ**ğŸ“œ
* **State = ç¾åœ¨åœ°**ğŸ§ 
* **Projection = è¦‹ã›æ–¹**ğŸ”

---

## â€œæ··ãœã‚‹ã¨äº‹æ•…ã‚‹â€ã‚ã‚‹ã‚ã‚‹é›†ğŸš‘ğŸ˜µâ€ğŸ’«

### äº‹æ•…â‘ ï¼šã‚¤ãƒ™ãƒ³ãƒˆã‚’å‘½ä»¤å½¢ã§ä½œã£ã¡ã‚ƒã†ğŸ“œâŒ

* âŒ `AddItemToCart`ï¼ˆå‘½ä»¤ï¼‰ã‚’ã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦ä¿å­˜
* âœ… `ItemAddedToCart`ï¼ˆäº‹å®Ÿï¼‰ã‚’ã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦ä¿å­˜
  ğŸ‘‰ ã‚¤ãƒ™ãƒ³ãƒˆã¯ã€Œèµ·ããŸã“ã¨ã€ãªã®ã§éå»å½¢ãŒè¶…å¤§äº‹â³âœ¨

---

### äº‹æ•…â‘¡ï¼šã‚³ãƒãƒ³ãƒ‰ã«â€œçµæœâ€ã‚’æ›¸ã„ã¡ã‚ƒã†ğŸ“®âŒ

* âŒ `AddItemSucceeded`ï¼ˆã‚‚ã†æˆåŠŸã—ã¦ã‚‹å‰æã«ãªã£ã¦ã‚‹ï¼‰
* âœ… `AddItemToCart`ï¼ˆãŠé¡˜ã„ï¼‰ â†’ æˆåŠŸã—ãŸã‚‰ `ItemAddedToCart`ï¼ˆäº‹å®Ÿï¼‰
  ğŸ‘‰ æˆåŠŸã—ãŸã‹ã©ã†ã‹ã¯**åˆ¤æ–­ã®ã‚ã¨**ã«æ±ºã¾ã‚‹ã‚ˆğŸ§ âœ…

---

### äº‹æ•…â‘¢ï¼šProjectionã‚’â€œçœŸå®Ÿâ€ã¨ã—ã¦ç·¨é›†ã—ã¯ã˜ã‚ã‚‹ğŸ”âŒ

* âŒ ç”»é¢ç”¨ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç›´æ¥æ›´æ–°ã—ã¦ã€Œã“ã‚ŒãŒæ­£ï¼ã€ã«ã™ã‚‹
* âœ… **ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆå±¥æ­´ï¼‰**ãŒæ­£ã§ã€Projectionã¯â€œæ´¾ç”Ÿç‰©â€ğŸŒ¿
  ğŸ‘‰ Projectionã¯å£Šã‚Œã¦ã‚‚ä½œã‚Šç›´ã›ã‚‹æ€æƒ³ãŒå¼·ã„ã‚ˆğŸ”ğŸ§¹

---

### äº‹æ•…â‘£ï¼šStateã‚’ä¿å­˜ã—ã¦ã€Œã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚°ã§ã™ï¼ã€ã£ã¦è¨€ã£ã¡ã‚ƒã†ğŸ§ âŒ

* çŠ¶æ…‹ä¿å­˜ã¯å…¨ç„¶æ‚ªããªã„ã‘ã©ã€**ã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚°**ã¯ã€ŒçŠ¶æ…‹å¤‰åŒ–ã‚’ã‚¤ãƒ™ãƒ³ãƒˆã§æ®‹ã™ã€ãŒæ ¸ğŸŒ± ([martinfowler.com][1])
  ğŸ‘‰ â€œå±¥æ­´â€ãŒæ®‹ã‚‹è¨­è¨ˆãŒæ¬²ã—ã„æ™‚ã«åŠ¹ã„ã¦ãã‚‹ğŸ’ªğŸ“š

---

### äº‹æ•…â‘¤ï¼šã‚¤ãƒ™ãƒ³ãƒˆã«UIéƒ½åˆã®é …ç›®ã‚’å…¥ã‚Œã™ãã‚‹ğŸ“œğŸ±âŒ

* âŒ `ButtonColor = "Red"` ã¿ãŸã„ãªâ€œç”»é¢éƒ½åˆâ€ãŒæ··ã–ã‚‹
* âœ… ã€Œäº‹å®Ÿã€ã¨ã—ã¦æ„å‘³ãŒã‚ã‚‹æƒ…å ±ã ã‘ï¼ˆèª°ãŒ/ä½•ã‚’/ã„ãã¤/ã„ã¤ ãªã©ï¼‰ğŸ§¾âœ…
  ğŸ‘‰ UIã¯Projectionå´ã§å¥½ãã«æ•´ãˆã‚ˆã†ğŸ”âœ¨

---

## ãƒŸãƒ‹æ¼”ç¿’ï¼šè¦ä»¶ã‚’4åˆ†é¡ã—ã¦ã¿ã‚ˆã†ğŸ—‚ï¸ğŸ˜Š

### ãŠé¡Œï¼šã‚«ãƒ¼ãƒˆã®è¦ä»¶ï¼ˆä¾‹ï¼‰ğŸ›’

æ¬¡ã®æ–‡ç« ã‚’ã€**Command / Event / State / Projection** ã«åˆ†é¡ã—ã¦ã­âœï¸âœ¨

1. ã€Œå•†å“ã‚’ã‚«ãƒ¼ãƒˆã«è¿½åŠ ã—ãŸã„ã€
2. ã€Œå•†å“ãŒè¿½åŠ ã•ã‚ŒãŸå±¥æ­´ã‚’æ®‹ã—ãŸã„ã€
3. ã€Œä»Šã®åˆè¨ˆé‡‘é¡ã‚’è¡¨ç¤ºã—ãŸã„ã€
4. ã€Œã‚«ãƒ¼ãƒˆä¸€è¦§ç”»é¢ã§ â€œã‚¢ã‚¤ãƒ†ãƒ æ•°â€ ã‚’ã™ãè¦‹ãŸã„ã€
5. ã€Œå•†å“ã‚’å‰Šé™¤ã—ãŸã„ã€
6. ã€Œä»Šã‚«ãƒ¼ãƒˆã«å…¥ã£ã¦ã‚‹å•†å“ä¸€è¦§ãŒã»ã—ã„ã€
7. ã€Œâ€œã„ã¤èª°ãŒè¿½åŠ ã—ãŸã‹â€ ãŒè¿½ãˆã‚‹ã‚ˆã†ã«ã—ãŸã„ã€
8. ã€Œæ¤œç´¢ã§â€œåˆè¨ˆé‡‘é¡ãŒ1000å††ä»¥ä¸Šã®ã‚«ãƒ¼ãƒˆâ€ã‚’å‡ºã—ãŸã„ã€

### ãƒ’ãƒ³ãƒˆğŸ’¡

* ã€Œã€œã—ãŸã„ã€â†’ **Commandå€™è£œ**ğŸ“®
* ã€Œã€œã•ã‚ŒãŸã€â†’ **Eventå€™è£œ**ğŸ“œ
* ã€Œä»Šã©ã†ãªã£ã¦ã‚‹ã€â†’ **Stateå€™è£œ**ğŸ§ 
* ã€Œç”»é¢ã§æ—©ãè¦‹ãŸã„ / æ¤œç´¢ã—ãŸã„ã€â†’ **Projectionå€™è£œ**ğŸ”

---

## ã¡ã„ã•ãªC#ä¾‹ï¼šå‹ã‚’åˆ†ã‘ã‚‹ã ã‘ã§äº‹æ•…ãŒæ¸›ã‚‹ğŸ§©ğŸ˜Š

> ã“ã“ã§ã¯â€œç”¨èªã‚’æ··ãœãªã„â€ãŸã‚ã«ã€**åå‰ã¨å‹ã®ç½®ãå ´æ‰€**ã‚’åˆ†ã‘ã‚‹ç·´ç¿’ã‚’ã™ã‚‹ã‚ˆâœï¸âœ¨

```csharp
// Command ğŸ“®ï¼ˆãŠé¡˜ã„ï¼‰: å‘½ä»¤å½¢
public sealed record AddItemToCart(Guid CartId, string Sku, int Quantity);

// Event ğŸ“œï¼ˆäº‹å®Ÿï¼‰: éå»å½¢
public sealed record ItemAddedToCart(Guid CartId, string Sku, int Quantity, DateTimeOffset OccurredAt);

// State ğŸ§ ï¼ˆç¾åœ¨ã®çŠ¶æ…‹ï¼‰: Eventåˆ—ã‚’Applyã—ã¦ä½œã‚‹
public sealed class CartState
{
    private readonly Dictionary<string, int> _items = new();
    public IReadOnlyDictionary<string, int> Items => _items;

    public void Apply(ItemAddedToCart e)
    {
        _items.TryGetValue(e.Sku, out var current);
        _items[e.Sku] = current + e.Quantity;
    }
}

// Projection ğŸ”ï¼ˆè¡¨ç¤ºç”¨ï¼‰: ç”»é¢ã®ãŸã‚ã®å½¢
public sealed class CartSummaryProjection
{
    public Guid CartId { get; private set; }
    public int TotalItems { get; private set; }
    public DateTimeOffset LastUpdatedAt { get; private set; }

    public void When(ItemAddedToCart e)
    {
        CartId = e.CartId;
        TotalItems += e.Quantity;
        LastUpdatedAt = e.OccurredAt;
    }
}
```

### ã“ã®ã‚³ãƒ¼ãƒ‰ã§å¤§äº‹ãªã“ã¨ğŸŒŸ

* **Command**ã¯â€œãŠé¡˜ã„â€ã ã‹ã‚‰ã€æˆåŠŸãƒ»å¤±æ•—ã©ã£ã¡ã‚‚ã‚ã‚Šãˆã‚‹ğŸ“®ğŸ˜µâ€ğŸ’«
* **Event**ã¯â€œèµ·ããŸäº‹å®Ÿâ€ã ã‹ã‚‰ã€éå»å½¢ã§ç¢ºå®šğŸ“œâœ…
* **State**ã¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’é©ç”¨ã—ã¦ä½œã‚‹ğŸ§ ğŸ”
* **Projection**ã¯è¡¨ç¤ºæœ€é©ï¼ˆã‚ã¨ã§å£Šã—ã¦ä½œã‚Šç›´ã—ã¦ã‚‚OKï¼‰ğŸ”ğŸ§¹

---

## ãƒã‚§ãƒƒã‚¯ã‚¯ã‚¤ã‚ºï¼ˆã‚µã‚¯ãƒƒã¨ï¼‰ğŸ§ âœ…

1. ã€ŒRemoveItemFromCartã€ã¯ã©ã‚Œï¼Ÿï¼ˆCommand / Eventï¼‰
2. ã€ŒItemRemovedFromCartã€ã¯ã©ã‚Œï¼Ÿï¼ˆCommand / Eventï¼‰
3. ã€Œã‚«ãƒ¼ãƒˆåˆè¨ˆé‡‘é¡ã€ã¯ã©ã‚Œï¼Ÿï¼ˆState / Projectionï¼‰
4. ã€Œä¸€è¦§ç”»é¢ã®è¡Œãƒ‡ãƒ¼ã‚¿ï¼ˆCartId, Total, Countï¼‰ã€ã¯ã©ã‚Œï¼Ÿï¼ˆState / Projectionï¼‰
5. ã‚¤ãƒ™ãƒ³ãƒˆåãŒéå»å½¢ãªã®ã¯ãªãœï¼Ÿï¼ˆä¸€è¨€ã§ï¼‰
6. Projectionã‚’ç›´æ¥æ›´æ–°ã—ã¦â€œçœŸå®Ÿâ€ã«ã—ã¦ã¯ã„ã‘ãªã„ç†ç”±ã¯ï¼Ÿï¼ˆä¸€è¨€ã§ï¼‰

ç­”ãˆåˆã‚ã›ã®ç›®å®‰ğŸ“Œ

* 1. Command ğŸ“® / 2) Event ğŸ“œ / 3) Stateã‹Projectionï¼ˆç”¨é€”ã§åˆ†ã‹ã‚Œã‚‹ï¼ï¼‰/ 4) Projection ğŸ”
* 5. â€œèµ·ããŸäº‹å®Ÿâ€ã ã‹ã‚‰ / 6) çœŸå®Ÿã¯ã‚¤ãƒ™ãƒ³ãƒˆã§ã€Projectionã¯æ´¾ç”Ÿç‰©ã ã‹ã‚‰ğŸŒ¿

---

## AIæ´»ç”¨ï¼š4åˆ†é¡ã‚’ä¸€ç¬ã§â€œä»®â€ã«ä½œã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹ğŸ¤–âœ¨

### â‘  è¦ä»¶ã‚’4åˆ†é¡ã—ã¦ã€ç†ç”±ã‚‚æ›¸ã‹ã›ã‚‹ğŸ—‚ï¸ğŸ’¬

```text
æ¬¡ã®è¦ä»¶ãƒªã‚¹ãƒˆã‚’ Command / Event / State / Projection ã«åˆ†é¡ã—ã¦ã€‚
å„é …ç›®ã«ã¤ã„ã¦ã€Œãªãœãã®åˆ†é¡ã‹ã€ã‚’1è¡Œã§èª¬æ˜ã—ã¦ã€‚
è¦ä»¶ï¼š
- ï¼ˆã“ã“ã«ç®‡æ¡æ›¸ãã§è²¼ã‚‹ï¼‰
```

### â‘¡ ã‚³ãƒãƒ³ãƒ‰â†’ã‚¤ãƒ™ãƒ³ãƒˆå€™è£œã‚’å‡ºã•ã›ã‚‹ğŸ“®â¡ï¸ğŸ“œ

```text
æ¬¡ã®Commandæ¡ˆãã‚Œãã‚Œã«ã¤ã„ã¦ã€
æˆåŠŸã—ãŸå ´åˆã«ç™ºç”Ÿã—ã†ã‚‹ Event åï¼ˆéå»å½¢ï¼‰ã‚’3æ¡ˆãšã¤å‡ºã—ã¦ã€‚
Command:
- AddItemToCart
- RemoveItemFromCart
å‡ºåŠ›ã¯ã€ŒCommand â†’ Eventå€™è£œï¼ˆ3ã¤ï¼‰ã€ã®å½¢ã§ã€‚
```

### â‘¢ â€œæ··ãœäº‹æ•…â€ã‚’æ¤œå‡ºã™ã‚‹ãƒ¬ãƒ“ãƒ¥ãƒ¼ğŸ¤–ğŸ‘€

```text
ã“ã®è¨­è¨ˆã®Command/Event/State/Projectionã®åˆ†ã‘æ–¹ã§ã€
æ··ã–ã£ã¦ã„ã‚‹ç®‡æ‰€ã‚„å±ãªã„å‘½åãŒã‚ã‚Œã°æŒ‡æ‘˜ã—ã¦ã€ä¿®æ­£æ¡ˆã‚‚å‡ºã—ã¦ã€‚
ï¼ˆã‚³ãƒ¼ãƒ‰ or ç®‡æ¡æ›¸ãã‚’è²¼ã‚‹ï¼‰
```

---

## ã‚³ãƒ©ãƒ ï¼š2026å¹´ã®.NETã®å‹•ãï¼ˆè¶…çŸ­ãï¼‰ğŸªŸâš¡

* .NET 10 ã¯ 2025å¹´11æœˆã«å…¬é–‹ã•ã‚Œã€LTSï¼ˆé•·æœŸã‚µãƒãƒ¼ãƒˆï¼‰ã¨ã—ã¦æ¡ˆå†…ã•ã‚Œã¦ã„ã‚‹ã‚ˆğŸ“Œ ([Microsoft for Developers][4])
* 2026å¹´1æœˆæ™‚ç‚¹ã§ã‚‚æ›´æ–°ãŒå‡ºã¦ã„ã‚‹ï¼ˆä¾‹ï¼š10.0.2 ã®ãƒªãƒªãƒ¼ã‚¹æ—¥è¡¨ç¤ºï¼‰ğŸ§© ([Microsoft][5])

---

## ã¾ã¨ã‚ï¼šã“ã®ç« ã§è¦šãˆãŸ4ã¤ã®â€œç½®ãå ´æ‰€â€ğŸ“¦ğŸ˜Š

* CommandğŸ“®ï¼šãŠé¡˜ã„ï¼ˆå‘½ä»¤å½¢ï¼‰
* EventğŸ“œï¼šäº‹å®Ÿï¼ˆéå»å½¢ï¼‰ï¼‹å±¥æ­´ãŒå¤§äº‹ ([martinfowler.com][1])
* StateğŸ§ ï¼šã‚¤ãƒ™ãƒ³ãƒˆã‚’Applyã—ã¦ã§ãã‚‹ç¾åœ¨åœ°
* ProjectionğŸ”ï¼šç”»é¢/æ¤œç´¢ã®ãŸã‚ã®èª­ã¿ã‚„ã™ã„å½¢ï¼ˆèª­ã¿ã¨æ›¸ãã‚’åˆ†ã‘ã‚‹ç™ºæƒ³ã¨ç›¸æ€§â—ï¼‰ ([Microsoft Learn][2])

[1]: https://martinfowler.com/eaaDev/EventSourcing.html?utm_source=chatgpt.com "Event Sourcing"
[2]: https://learn.microsoft.com/en-us/azure/architecture/patterns/cqrs?utm_source=chatgpt.com "CQRS Pattern - Azure Architecture Center"
[3]: https://docs.kurrent.io/server/v22.10/projections?utm_source=chatgpt.com "Projections | Kurrent Docs"
[4]: https://devblogs.microsoft.com/dotnet/announcing-dotnet-10/?utm_source=chatgpt.com "Announcing .NET 10"
[5]: https://dotnet.microsoft.com/en-US/download/dotnet/10.0?utm_source=chatgpt.com "Download .NET 10.0 (Linux, macOS, and Windows) | .NET"
