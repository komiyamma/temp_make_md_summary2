# ç¬¬23ç« ï¼š`tsconfig.json` ã¯ â€œã¾ãšè–„ãâ€ğŸ§Šâ¡ï¸ğŸ§ 

ã“ã®ç« ã¯ã²ã¨ã“ã¨ã§è¨€ã†ã¨â€”â€”
**ã€ŒTSè¨­å®šã§æººã‚Œãšã«ã€ã¡ã‚ƒã‚“ã¨å‹•ãâ€œæœ€ä½ãƒ©ã‚¤ãƒ³â€ã ã‘å…ˆã«å›ºã‚ã‚‹ã€**å›ã§ã™ğŸ˜†âœ¨
`tsconfig.json` ã¯ â€œæ­£ã—ã•â€ ã ã‘ã˜ã‚ƒãªã **ãƒ“ãƒ«ãƒ‰çµæœãƒ»å®Ÿè¡Œãƒ»ãƒ‡ãƒãƒƒã‚°ä½“é¨“**ã¾ã§å¤‰ãˆã¾ã™ğŸ§©

---

## 1) ãã‚‚ãã‚‚ `tsconfig.json` ã£ã¦ä½•è€…ï¼ŸğŸ§ ğŸ“„

`tsconfig.json` ã¯ **TypeScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ï¼ˆ`tsc`ï¼‰ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«**ã§ã™âš™ï¸
ã“ã“ãŒé‡ã„ã¨ã“ã†ãªã‚Šã¾ã™ğŸ‘‡

* è¨­å®šãŒå¤šã™ãã¦ã€Œä½•ã‚’å¤‰ãˆãŸã‚‰ã„ã„ã®â€¦ğŸ˜µã€
* ESM/CJSã‚„importè§£æ±ºã§ã€Œãªã‚“ã§å‹•ã‹ãªã„ã®â€¦ğŸ˜‡ã€
* ãƒ‡ãƒãƒƒã‚°ã®è¡Œç•ªå·ãŒã‚ºãƒ¬ã¦ã€Œã©ã“ã§è½ã¡ãŸã®â€¦ğŸ« ã€

ã ã‹ã‚‰æ–¹é‡ã¯ã“ã‚Œã§ã™ğŸ‘‡

âœ… **â€œã¾ãšè–„ãâ€ = å¿…è¦æœ€ä½é™ã ã‘ç½®ã**
âœ… å¢—ã‚„ã™ã®ã¯ã€Œå›°ã£ã¦ã‹ã‚‰ã€ã§OKğŸ™†â€â™‚ï¸âœ¨

---

## 2) 2026å¹´ã®ã‚¹ã‚¿ãƒ¼ãƒˆåœ°ç‚¹ã¯ã“ã†è€ƒãˆã‚‹ğŸ›«âœ¨

æœ€è¿‘ã®TypeScriptã¯ã€`tsc --init` ãŒ **ã„ããªã‚Šç¾ä»£å¯„ã‚Šã®è¨­å®šã§ç”Ÿæˆ**ã•ã‚Œã‚‹æµã‚Œã«ãªã£ã¦ã„ã¾ã™ï¼ˆTS 5.9ã§æ–¹é‡ãŒã‹ãªã‚Šæ•´ç†ã•ã‚ŒãŸï¼‰ğŸ§¹âœ¨
ç‰¹ã« **`module` ã‚„ `target` ã‚’ç¾ä»£å¯„ã‚Šã«å¯„ã›ã‚‹**ã®ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æ–¹å‘æ€§ã§ã™ã€‚([Microsoft for Developers][1])

ã•ã‚‰ã«TS 5.9ã§ã¯ã€Nodeã®æŒ™å‹•ã‚’ â€œå›ºå®šçš„ã«â€ è¿‘ä¼¼ã™ã‚‹ãŸã‚ã® **`--module node20`** ã‚‚å®‰å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã—ã¦å…¥ã£ã¦ãã¾ã—ãŸï¼ˆ`nodenext`ã¯å°†æ¥è¿½å¾“å¯„ã‚Šã€`node20`ã¯å®‰å®šå¯„ã‚Šï¼‰ğŸ§­([Microsoft for Developers][1])

---

## 3) ä»Šå›ã®ã‚´ãƒ¼ãƒ«ğŸ¯ğŸ’¡

ã“ã®ç« ã§ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã“ã¨ğŸ‘‡

* `tsconfig.json` ã‚’ **â€œè–„ã„ç‰ˆâ€**ã§ä½œã‚Œã‚‹ğŸ§Šâœ¨
* **Nodeã§å‹•ã‹ã™å‰æ**ã®æœ€ä½é™ï¼ˆimportè§£æ±ºãµãã‚€ï¼‰ãŒåˆ†ã‹ã‚‹ğŸ§¯
* `tsc` ãŒæœ¬å½“ã«ãã®è¨­å®šã‚’èª­ã‚“ã§ã‚‹ã‹ç¢ºèªã§ãã‚‹âœ…
* ãƒ‡ãƒãƒƒã‚°ãŒå¹¸ã›ã«ãªã‚‹ä¸‹æº–å‚™ï¼ˆsource mapï¼‰ã¾ã§ã§ãã‚‹ğŸ•µï¸â€â™‚ï¸âœ¨

---

## 4) ã¾ãšã¯ â€œè–„ã„ tsconfigâ€ ã‚’ç½®ã“ã†ğŸ“„ğŸ§Š

æ§‹æˆã®å‰æã¯ã‚ˆãã‚ã‚‹ã“ã‚ŒğŸ‘‡

* `src/` ã«TSã‚½ãƒ¼ã‚¹
* `dist/` ã«ãƒ“ãƒ«ãƒ‰çµæœ

ãŠã™ã™ã‚ã® **è–„ã„ `tsconfig.json`** ã¯ã“ã‚Œã§ã™ğŸ‘‡ï¼ˆã¾ãšã“ã‚Œã§OKï¼ï¼‰

```json
{
  "compilerOptions": {
    "target": "ESNext",
    "module": "NodeNext",
    "moduleResolution": "NodeNext",

    "rootDir": "./src",
    "outDir": "./dist",

    "strict": true,
    "skipLibCheck": true,

    "sourceMap": true,

    "types": ["node"]
  },
  "include": ["src/**/*.ts"],
  "exclude": ["node_modules", "dist"]
}
```

### ã“ã‚Œã ã‘å…¥ã£ã¦ã‚Œã°å‹ã¦ã‚‹ç†ç”±ğŸ†âœ¨

* **`module` + `moduleResolution` ã‚’ã‚»ãƒƒãƒˆ**ã«ã—ã¦ãŠãã¨ã€importå‘¨ã‚Šã®äº‹æ•…ãŒæ¿€æ¸›ã—ã¾ã™ğŸ§¯
  ï¼ˆ`node16` / `nodenext` ã¯ â€œNodeã§å®Ÿè¡Œã™ã‚‹â€ å‰æã®è§£æ±ºæ–¹å¼ï¼‰([TypeScript][2])
* **`types: ["node"]`** ã‚’æ˜ç¤ºã™ã‚‹ã¨ã€`process` ã‚„ `Buffer` ãŒæ€¥ã«æœªå®šç¾©ã«ãªã‚‰ãšå®‰å¿ƒğŸ˜Œ
  ï¼ˆTS 5.9ã® `tsc --init` ãŒ `types: []` ã‚’ç”Ÿæˆã™ã‚‹ã®ã‚‚ã€Œå‹æ‰‹ã«è‰²ã€…èª­ã¿éããªã„ã€æ–¹å‘æ€§ã®ä¸€ç’°ï¼‰([Microsoft for Developers][1])
* **`sourceMap: true`** ã¯ãƒ‡ãƒãƒƒã‚°ã®å¹¸ç¦åº¦ãŒä¸ŠãŒã‚Šã¾ã™ğŸ•µï¸â€â™‚ï¸âœ¨ï¼ˆå¾Œã§åŠ¹ãï¼ï¼‰

---

## 5) ä¾å­˜ã‚‚ â€œæœ€å°ã§â€ æƒãˆã‚‹ğŸ“¦âœ¨

æœ€ä½é™ã“ã‚Œã ã‘å…¥ã‚Œã‚Œã°OKğŸ‘‡

```bash
npm i -D typescript @types/node
```

* `@types/node` ãŒãªã„ã¨ã€`types: ["node"]` ã‚’æ›¸ã„ã¦ã‚‚å‹ãŒè¦‹ã¤ã‹ã‚‰ãšã‚³ã‚±ã¾ã™ğŸ’¥ğŸ™‚

---

## 6) â€œã“ã®tsconfigèª­ã‚“ã§ã‚‹ï¼Ÿâ€ã‚’ä¸€ç™ºã§ç¢ºèªã™ã‚‹âœ…ğŸ‘€

è¨­å®šãŒåŠ¹ã„ã¦ã‚‹ã‹æ€ªã—ã„æ™‚ã¯ã“ã‚ŒãŒæœ€å¼·ã§ã™ğŸ‘‡

```bash
npx tsc --showConfig
```

å‡ºåŠ›ã®ä¸­ã«ã€ã‚ãªãŸãŒæ›¸ã„ãŸ `module` / `target` / `outDir` ãŒåæ˜ ã•ã‚Œã¦ãŸã‚‰å‹ã¡ğŸğŸ‰

---

## 7) ã‚ˆãã‚ã‚‹è©°ã¾ã‚Šãƒã‚¤ãƒ³ãƒˆ3ã¤ï¼ˆå…ˆã«æ½°ã™ï¼‰ğŸ’£ğŸ§¯

### â¶ `import` ã®è§£æ±ºãŒè¬ã™ãã‚‹ğŸ˜‡

Nodeã§ãã®ã¾ã¾å‹•ã‹ã™å‰æã ã¨ã€**â€œNodeãŒå«ŒãŒã‚‹importâ€** ã‚’æ—©ã‚ã«å¼¾ããŸã„ã‚“ã§ã™ã‚ˆã­ã€‚

ã“ã“ã§å¤§äº‹ãªã®ãŒğŸ‘‡

* **`moduleResolution: "bundler"` ã¯ä¾¿åˆ©ã ã‘ã© â€œæ„ŸæŸ“ã™ã‚‹â€**ï¼ˆãƒãƒ³ãƒ‰ãƒ©ã§ã—ã‹å‹•ã‹ãªã„importã‚’è¨±ã—ã‚„ã™ã„ï¼‰
* **Nodeå®Ÿè¡Œå‰æãªã‚‰ `nodenext` ã®æ–¹ãŒå®‰å…¨å¯„ã‚Š**ï¼ˆNodeã§å‹•ãå½¢ã«å¯„ã›ã‚‹ï¼‰([TypeScript][3])

â€»ã“ã®è©±ã¯æ¬¡ç« ï¼ˆESM/CJSï¼‰ã§å®Œå…¨ã«å›åã™ã‚‹ã®ã§ã€ã“ã“ã§ã¯ã€ŒNodeã§å‹•ãå¯„ã‚Šã«å€’ã™ã€ã ã‘è¦šãˆã‚Œã°OKã§ã™ğŸ§ âœ¨

---

### â· `process is not defined` / `Cannot find name 'Buffer'` ğŸ˜µ

ã ã„ãŸã„ã“ã‚ŒğŸ‘‡

* `@types/node` å…¥ã‚Œã¦ãªã„
* `types: ["node"]` æ›¸ã„ã¦ãªã„ï¼ˆã¾ãŸã¯åˆ¥tsconfigã‚’èª­ã‚“ã§ã‚‹ï¼‰

âœ… ã•ã£ãã®ã€Œè–„ã„tsconfigã€ï¼‹ `@types/node` ã§è§£æ±ºã—ã¾ã™ğŸ‘âœ¨

---

### â¸ `dist` ã«å‡ºåŠ›ã•ã‚Œãªã„ / å¤‰ãªå ´æ‰€ã«å‡ºã‚‹ğŸ« 

åŸå› ã¯ã ã„ãŸã„ğŸ‘‡

* `rootDir` / `outDir` ãŒãªã„
* `include` ãŒã‚ºãƒ¬ã¦ã‚‹
* `exclude` ã« `src` ã‚’å…¥ã‚Œã¡ã‚ƒã£ã¦ã‚‹ï¼ˆã‚ã‚‹ã‚ã‚‹ğŸ˜‚ï¼‰

âœ… ã¾ãšã¯ã“ã®ç« ã®ãƒ†ãƒ³ãƒ—ãƒ¬ã‹ã‚‰å‹•ã‹ã™ã®ãŒæœ€çŸ­ã§ã™ğŸƒâ€â™‚ï¸ğŸ’¨

---

## 8) ãƒ‡ãƒãƒƒã‚°ã‚’ â€œæ°—æŒã¡ã‚ˆãâ€ ã™ã‚‹å°ãƒ¯ã‚¶ğŸ•µï¸â€â™‚ï¸âœ¨

`sourceMap: true` ã‚’ä»˜ã‘ãŸã‚‰ã€å®Ÿè¡Œå´ã§ã‚‚ source map ã‚’ä½¿ã†ã¨å¹¸ã›ã§ã™ğŸ˜Š

Nodeã¯ `--enable-source-maps` ã§ **ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’å…ƒã‚½ãƒ¼ã‚¹å¯„ã‚Šã«ã—ã¦ãã‚Œã¾ã™**âœ¨
ãŸã ã— **æœ‰åŠ¹åŒ–ã¯ã‚³ã‚¹ãƒˆãŒã‚ã‚‹**ï¼ˆ`Error.stack` å‚ç…§æ™‚ã«é…ããªã‚‹å¯èƒ½æ€§ï¼‰ã®ã§ã€å¿…è¦ãªå ´é¢ã§ä½¿ã†ã®ãŒã‚³ãƒ„ã§ã™âš–ï¸([Node.js][4])

ä¾‹ğŸ‘‡

```bash
node --enable-source-maps dist/index.js
```

---

## 9) VS Codeå´ã® â€œåŠ¹ã„ã¦ã‚‹æ„Ÿâ€ ãƒã‚§ãƒƒã‚¯âœ…ğŸ§ 

VS Codeã§ã€Œãªã‚“ã‹å‹ãŒå¤‰â€¦ğŸ¤”ã€ã£ã¦æ™‚ã¯ã“ã‚ŒğŸ‘‡

* ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆã§ **TypeScript: Select TypeScript Version**
  â†’ **Use Workspace Version**ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®TSã‚’ä½¿ã†ï¼‰ã‚’é¸ã¶ğŸ¯

ã“ã‚Œã§ â€œã‚¨ãƒ‡ã‚£ã‚¿ãŒè¦‹ã¦ã‚‹TSâ€ ã¨ â€œã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦ã‚‹TSâ€ ãŒã‚ºãƒ¬ã«ãããªã‚Šã¾ã™ğŸ˜Œâœ¨

---

## 10) AIã«æŠ•ã’ã‚‹ã¨çˆ†é€Ÿã«ãªã‚‹æŒ‡ç¤ºä¾‹ğŸ¤–âš¡

âœ… `tsconfig` ã‚’è–„ãã—ãŸã„æ™‚ï¼š

> ã€ŒNodeã§å®Ÿè¡Œã™ã‚‹TypeScriptãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€‚tsconfigã‚’æœ€å°æ§‹æˆã«ã—ã¦ã€importè§£æ±ºã¯NodeNextã€å‡ºåŠ›ã¯distã€srcé…ä¸‹ã ã‘å¯¾è±¡ã€sourceMapã¯æœ‰åŠ¹ã«ã—ã¦ã€‚ã€

âœ… å¤‰ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸæ™‚ï¼š

> ã€Œã“ã®ã‚¨ãƒ©ãƒ¼ã‚’â€œtsconfigã®è¦³ç‚¹â€ã§åŸå› å€™è£œã‚’3ã¤å‡ºã—ã¦ã€‚ã©ã‚ŒãŒæ¿ƒåšã‹é †ç•ªã‚‚ã¤ã‘ã¦ã€‚ã€

---

## 11) ãƒŸãƒ‹èª²é¡ŒğŸ’ğŸ”¥ï¼ˆ5åˆ†ã§çµ‚ã‚ã‚‹ï¼‰

1. `src/index.ts` ã‚’ä½œã‚‹âœï¸
2. `npx tsc` ã§ `dist/index.js` ãŒå‡ºã‚‹ã®ã‚’ç¢ºèªâœ…
3. ã‚ã–ã¨ `throw new Error("boom")` ã—ã¦
4. `node dist/index.js` ã¨ `node --enable-source-maps dist/index.js` ã® **ã‚¹ã‚¿ãƒƒã‚¯è¡¨ç¤ºã®é•ã„**ã‚’è¦‹ã‚‹ğŸ‘€âœ¨([Node.js][4])

---

## ã¾ã¨ã‚ğŸâœ¨

* `tsconfig.json` ã¯ **ã¾ãšè–„ã**ã§OKğŸ§Š
* Nodeã§å‹•ã‹ã™å‰æãªã‚‰ã€`module/moduleResolution` ã‚’ **Nodeå¯„ã‚Šã«å€’ã™**ã¨äº‹æ•…ã‚Šã«ãã„ğŸ§¯([TypeScript][2])
* TS 5.9 ä»¥é™ã¯ `tsc --init` ã‚‚ç¾ä»£å¯„ã‚Šã«ãªã£ã¦ã‚‹ï¼ˆãŸã ã—ã‚¢ãƒ—ãƒªç”¨é€”ãªã‚‰å‰Šã‚‹ã®ã‚‚æ­£è§£ï¼‰ğŸ§¹([Microsoft for Developers][1])
* source map ã¯å¾Œã§åŠ¹ãï¼ãƒ‡ãƒãƒƒã‚°ãŒå¹¸ã›ã«ãªã‚‹ğŸ•µï¸â€â™‚ï¸âœ¨([Node.js][4])

---

æ¬¡ã®ç¬¬24ç« ã¯ã€ã“ã“ã§è§¦ã‚ŒãŸ **ESM/CJSã¨ `"type": "module"` ã®åœ°é›·**ã‚’ã€Œæœ€ä½ãƒ©ã‚¤ãƒ³ã ã‘ã€ã§è¶…ãˆã¾ã™ğŸ§¯ğŸ”¥
ï¼ˆ`import` ã§ã‚³ã‚±ãŸæ™‚ã« â€œä½•ã‚’ç¢ºèªã™ã¹ãã‹â€ ãŒåˆ†ã‹ã‚‹å›ï¼ï¼‰

[1]: https://devblogs.microsoft.com/typescript/announcing-typescript-5-9/ "Announcing TypeScript 5.9 - TypeScript"
[2]: https://www.typescriptlang.org/tsconfig/moduleResolution.html "TypeScript: TSConfig Option: moduleResolution"
[3]: https://www.typescriptlang.org/docs/handbook/modules/guides/choosing-compiler-options.html "TypeScript: Documentation - Modules - Choosing Compiler Options"
[4]: https://nodejs.org/api/cli.html?utm_source=chatgpt.com "Command-line API | Node.js v25.6.0 Documentation"
