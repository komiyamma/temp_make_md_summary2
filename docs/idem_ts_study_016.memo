同時実行時の二重登録を防ぐには、アプリ側の確認ではなくDBのユニーク制約が有効だ。INSERTを行い、競合時は既存結果を返す設計が王道となる。