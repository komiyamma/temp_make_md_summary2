第31章はOutboxパターン。DB更新とイベント発行の整合性を保つため、同一トランザクションで「送信待ちメッセージ」を記録し、別プロセスで送信する仕組みと実装を解説。