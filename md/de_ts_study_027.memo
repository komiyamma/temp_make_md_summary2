ハンドラテストはDIで外部I/Oをモック化し、Vitestのvi.fnを用いて副作用の実行回数や引数を厳密に検証する。例外時の挙動定義も重要である。
